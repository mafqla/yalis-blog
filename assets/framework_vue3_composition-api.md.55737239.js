import{_ as s,c as n,o as a,b as l}from"./app.7b86e9a5.js";var p="/assets/image-20220726173351155.806a2c3a.png";const d=JSON.parse('{"title":"13. \u7EC4\u5408\u5F0Fapi","description":"","frontmatter":{},"headers":[{"level":2,"title":"13.1 Mixin","slug":"_13-1-mixin"},{"level":3,"title":"13.1.1 Mixin\u7684\u57FA\u672C\u4F7F\u7528","slug":"_13-1-1-mixin\u7684\u57FA\u672C\u4F7F\u7528"},{"level":3,"title":"13.1.2Mixin\u7684\u5408\u5E76\u89C4\u5219","slug":"_13-1-2mixin\u7684\u5408\u5E76\u89C4\u5219"},{"level":3,"title":"13.1.3 \u5168\u5C40\u6DF7\u5165Mixin","slug":"_13-1-3-\u5168\u5C40\u6DF7\u5165mixin"},{"level":2,"title":"13.2 Composition API\u57FA\u7840","slug":"_13-2-composition-api\u57FA\u7840"},{"level":3,"title":"13.2.1 setup\u51FD\u6570\u7684\u53C2\u6570","slug":"_13-2-1-setup\u51FD\u6570\u7684\u53C2\u6570"},{"level":3,"title":"13.2.2 setup\u7684\u8FD4\u56DE\u503C","slug":"_13-2-2-setup\u7684\u8FD4\u56DE\u503C"},{"level":3,"title":"13.2.3 Reactive API\u7684\u4F7F\u7528","slug":"_13-2-3-reactive-api\u7684\u4F7F\u7528"},{"level":3,"title":"13.2.4 Ref API\u7684\u4F7F\u7528","slug":"_13-2-4-ref-api\u7684\u4F7F\u7528"},{"level":3,"title":"13.2.5 ref\u6D45\u5C42\u7684\u89E3\u5305","slug":"_13-2-5-ref\u6D45\u5C42\u7684\u89E3\u5305"},{"level":3,"title":"13.2.6 readonly\u7684\u4F7F\u7528","slug":"_13-2-6-readonly\u7684\u4F7F\u7528"},{"level":2,"title":"13.3 ReactiveAPI\u7684\u8865\u5145","slug":"_13-3-reactiveapi\u7684\u8865\u5145"},{"level":3,"title":"13.3.1 Reactive\u5224\u65AD\u7684API","slug":"_13-3-1-reactive\u5224\u65AD\u7684api"},{"level":3,"title":"13.3.2 toRefs\u548CtoRef\u7684\u4F7F\u7528","slug":"_13-3-2-torefs\u548Ctoref\u7684\u4F7F\u7528"},{"level":3,"title":"13.3.3 ref\u5176\u4ED6\u7684API","slug":"_13-3-3-ref\u5176\u4ED6\u7684api"},{"level":3,"title":"13.3.4 \u81EA\u5B9A\u4E49ref","slug":"_13-3-4-\u81EA\u5B9A\u4E49ref"},{"level":2,"title":"13.4 \u8BA1\u7B97\u5C5E\u6027computed\u57FA\u672C\u4F7F\u7528","slug":"_13-4-\u8BA1\u7B97\u5C5E\u6027computed\u57FA\u672C\u4F7F\u7528"},{"level":2,"title":"13.5 \u4FA6\u542C\u6570\u636E\u53D8\u5316","slug":"_13-5-\u4FA6\u542C\u6570\u636E\u53D8\u5316"},{"level":3,"title":"13.5.1 watchEffect\u57FA\u672C\u4F7F\u7528","slug":"_13-5-1-watcheffect\u57FA\u672C\u4F7F\u7528"},{"level":3,"title":"13.5.2 watchEffect\u505C\u6B62\u4FA6\u542C","slug":"_13-5-2-watcheffect\u505C\u6B62\u4FA6\u542C"},{"level":3,"title":"13.5.3 watchEffect\u6E05\u9664\u526F\u4F5C\u7528","slug":"_13-5-3-watcheffect\u6E05\u9664\u526F\u4F5C\u7528"},{"level":3,"title":"13.5.4 watchEffect\u7684\u6267\u884C\u65F6\u673A","slug":"_13-5-4-watcheffect\u7684\u6267\u884C\u65F6\u673A"},{"level":3,"title":"13.5.5 Watch\u7684\u4F7F\u7528","slug":"_13-5-5-watch\u7684\u4F7F\u7528"},{"level":3,"title":"13.5.6 Watch\u6DF1\u5C42\u4FA6\u542C\u5668","slug":"_13-5-6-watch\u6DF1\u5C42\u4FA6\u542C\u5668"},{"level":2,"title":"13.6 setup\u7684\u751F\u547D\u5468\u671F","slug":"_13-6-setup\u7684\u751F\u547D\u5468\u671F"},{"level":2,"title":"13.7 Provide\u548CInject","slug":"_13-7-provide\u548Cinject"},{"level":3,"title":"13.7.1 provide\u51FD\u6570","slug":"_13-7-1-provide\u51FD\u6570"},{"level":3,"title":"13.7.2 inject\u51FD\u6570","slug":"_13-7-2-inject\u51FD\u6570"},{"level":3,"title":"13.7.3 \u6570\u636E\u7684\u54CD\u5E94\u5F0F","slug":"_13-7-3-\u6570\u636E\u7684\u54CD\u5E94\u5F0F"},{"level":2,"title":"13.8 \u6E32\u67D3\u51FD\u6570 & JSX","slug":"_13-8-\u6E32\u67D3\u51FD\u6570-jsx"},{"level":3,"title":"13.8.1 \u57FA\u672C\u7528\u6CD5","slug":"_13-8-1-\u57FA\u672C\u7528\u6CD5"},{"level":3,"title":"13.8.2  \u6E32\u67D3\u63D2\u69FD[#](https://staging-cn.vuejs.org/guide/extras/render-function.html#rendering-slots)","slug":"_13-8-2-\u6E32\u67D3\u63D2\u69FD"},{"level":3,"title":"13.8.3 jsx\u7684\u4F7F\u7528","slug":"_13-8-3-jsx\u7684\u4F7F\u7528"},{"level":3,"title":"13.8.4 jsx\u7EC4\u4EF6\u7684\u4F7F\u7528","slug":"_13-8-4-jsx\u7EC4\u4EF6\u7684\u4F7F\u7528"},{"level":2,"title":"13.9 \u7EC4\u5408\u5F0F\u51FD\u6570(\u7C7B\u4F3Creact hook)","slug":"_13-9-\u7EC4\u5408\u5F0F\u51FD\u6570-\u7C7B\u4F3Creact-hook"},{"level":2,"title":"13.10 \u81EA\u5B9A\u4E49\u6307\u4EE4","slug":"_13-10-\u81EA\u5B9A\u4E49\u6307\u4EE4"},{"level":3,"title":"13.10.1\u6307\u4EE4\u7684\u751F\u547D\u5468\u671F","slug":"_13-10-1\u6307\u4EE4\u7684\u751F\u547D\u5468\u671F"},{"level":3,"title":"13.10.2 \u6307\u4EE4\u7684\u53C2\u6570\u548C\u4FEE\u9970\u7B26","slug":"_13-10-2-\u6307\u4EE4\u7684\u53C2\u6570\u548C\u4FEE\u9970\u7B26"},{"level":2,"title":"13.11 \u5185\u7F6E\u7EC4\u4EF6Teleport","slug":"_13-11-\u5185\u7F6E\u7EC4\u4EF6teleport"},{"level":3,"title":"13.11.1 \u4EC0\u4E48\u662FTeleport\uFF1F","slug":"_13-11-1-\u4EC0\u4E48\u662Fteleport\uFF1F"},{"level":3,"title":"13.11.2 \u642D\u914D\u7EC4\u4EF6\u4F7F\u7528","slug":"_13-11-2-\u642D\u914D\u7EC4\u4EF6\u4F7F\u7528"},{"level":3,"title":"13.11.3 \u591A\u4E2Ateleport","slug":"_13-11-3-\u591A\u4E2Ateleport"},{"level":2,"title":"13.12 \u63D2\u4EF6","slug":"_13-12-\u63D2\u4EF6"},{"level":3,"title":"13. 12.1 \u4EC0\u4E48\u662F\u63D2\u4EF6","slug":"_13-12-1-\u4EC0\u4E48\u662F\u63D2\u4EF6"},{"level":3,"title":"13.12.2 \u63D2\u4EF6\u7684\u7F16\u5199\u65B9\u5F0F","slug":"_13-12-2-\u63D2\u4EF6\u7684\u7F16\u5199\u65B9\u5F0F"},{"level":3,"title":"13.12.3  \u63D2\u4EF6\u4E2D\u7684\u4F9B\u7ED9 / \u6CE8\u5165","slug":"_13-12-3-\u63D2\u4EF6\u4E2D\u7684\u4F9B\u7ED9-\u6CE8\u5165"},{"level":2,"title":"13.3 nextTick","slug":"_13-3-nexttick"}],"relativePath":"framework/vue3/composition-api.md","lastUpdated":1660379986000}'),o={name:"framework/vue3/composition-api.md"},e=l(`<h1 id="_13-\u7EC4\u5408\u5F0Fapi" tabindex="-1">13. \u7EC4\u5408\u5F0Fapi <a class="header-anchor" href="#_13-\u7EC4\u5408\u5F0Fapi" aria-hidden="true">#</a></h1><h2 id="_13-1-mixin" tabindex="-1">13.1 Mixin <a class="header-anchor" href="#_13-1-mixin" aria-hidden="true">#</a></h2><ul><li>\u76EE\u524D\u6211\u4EEC\u662F\u4F7F\u7528\u7EC4\u4EF6\u5316\u7684\u65B9\u5F0F\u5728\u5F00\u53D1\u6574\u4E2AVue\u7684\u5E94\u7528\u7A0B\u5E8F\uFF0C\u4F46\u662F<code>\u7EC4\u4EF6\u548C\u7EC4\u4EF6\u4E4B\u95F4\u6709\u65F6\u5019\u4F1A\u5B58\u5728\u76F8\u540C\u7684\u4EE3\u7801\u903B\u8F91</code>\uFF0C\u6211 \u4EEC\u5E0C\u671B\u5BF9<code>\u76F8\u540C\u7684\u4EE3\u7801\u903B\u8F91\u8FDB\u884C\u62BD\u53D6</code>\u3002</li><li>\u5728Vue2\u548CVue3\u4E2D\u90FD\u652F\u6301\u7684\u4E00\u79CD\u65B9\u5F0F\u5C31\u662F<code>\u4F7F\u7528Mixin</code>\u6765\u5B8C\u6210\uFF1A <ul><li>Mixin\u63D0\u4F9B\u4E86\u4E00\u79CD\u975E\u5E38\u7075\u6D3B\u7684\u65B9\u5F0F\uFF0C\u6765\u5206\u53D1<code>Vue\u7EC4\u4EF6\u4E2D\u7684\u53EF\u590D\u7528\u529F\u80FD</code>\uFF1B</li><li>\u4E00\u4E2AMixin\u5BF9\u8C61\u53EF\u4EE5\u5305\u542B<code>\u4EFB\u4F55\u7EC4\u4EF6\u9009\u9879</code>\uFF1B</li><li>\u5F53\u7EC4\u4EF6\u4F7F\u7528Mixin\u5BF9\u8C61\u65F6\uFF0C\u6240\u6709<code>Mixin\u5BF9\u8C61\u7684\u9009\u9879\u5C06\u88AB\u6DF7\u5408\u8FDB\u5165\u8BE5\u7EC4\u4EF6\u672C\u8EAB\u7684\u9009\u9879</code>\u4E2D</li></ul></li></ul><h3 id="_13-1-1-mixin\u7684\u57FA\u672C\u4F7F\u7528" tabindex="-1">13.1.1 Mixin\u7684\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_13-1-1-mixin\u7684\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li>\u4F7F\u7528<code>mixins:[]</code>\u53EF\u4EE5\u5C06<code>demoMixin.js</code>\u7684\u6240\u6709\u5BF9\u8C61\u9009\u9879\u5BFC\u5165\u5230<code>Home.vue</code></li></ul><p><code>Home.vue</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">foo</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;\u6309\u94AE&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">demoMixin</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./mixins/demoMixin&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">mixins</span><span style="color:#ABB2BF;">: [</span><span style="color:#E06C75;">demoMixin</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello World&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>demoMixin.js</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">demoMixin</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello DemoMixin&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">foo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;demo mixin foo&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">created</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;\u6267\u884C\u4E86demo mixin created&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-1-2mixin\u7684\u5408\u5E76\u89C4\u5219" tabindex="-1">13.1.2Mixin\u7684\u5408\u5E76\u89C4\u5219 <a class="header-anchor" href="#_13-1-2mixin\u7684\u5408\u5E76\u89C4\u5219" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679CMixin\u5BF9\u8C61\u4E2D\u7684\u9009\u9879\u548C\u7EC4\u4EF6\u5BF9\u8C61\u4E2D\u7684\u9009\u9879\u53D1\u751F\u4E86\u51B2\u7A81\uFF0C\u90A3\u4E48Vue\u4F1A\u5982\u4F55\u64CD\u4F5C\u5462\uFF1F</p><ul><li>\u8FD9\u91CC\u5206\u6210\u4E0D\u540C\u7684\u60C5\u51B5\u6765\u8FDB\u884C\u5904\u7406\uFF1B</li></ul></li><li><p><strong>\u60C5\u51B5\u4E00\uFF1A\u5982\u679C\u662Fdata\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u5BF9\u8C61</strong></p><ul><li><p>\u8FD4\u56DE\u503C\u5BF9\u8C61\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4F1A\u8FDB\u884C\u5408\u5E76\uFF1B</p></li><li><p>\u5982\u679Cdata\u8FD4\u56DE\u503C\u5BF9\u8C61\u7684\u5C5E\u6027\u53D1\u751F\u4E86\u51B2\u7A81\uFF0C\u90A3\u4E48\u4F1A\u4FDD\u7559\u7EC4\u4EF6\u81EA\u8EAB\u7684\u6570\u636E\uFF1B</p></li></ul></li><li><p><strong>\u60C5\u51B5\u4E8C\uFF1A\u5982\u4F55\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570</strong></p><ul><li>\u751F\u547D\u5468\u671F\u7684\u94A9\u5B50\u51FD\u6570\u4F1A\u88AB\u5408\u5E76\u5230\u6570\u7EC4\u4E2D\uFF0C\u90FD\u4F1A\u88AB\u8C03\u7528\uFF1B</li></ul></li><li><p><strong>\u60C5\u51B5\u4E09\uFF1A\u503C\u4E3A\u5BF9\u8C61\u7684\u9009\u9879\uFF0C\u4F8B\u5982 methods\u3001components \u548C directives\uFF0C\u5C06\u88AB\u5408\u5E76\u4E3A\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</strong></p><ul><li><p>\u6BD4\u5982\u90FD\u6709methods\u9009\u9879\uFF0C\u5E76\u4E14\u90FD\u5B9A\u4E49\u4E86\u65B9\u6CD5\uFF0C\u90A3\u4E48\u5B83\u4EEC\u90FD\u4F1A\u751F\u6548\uFF1B</p></li><li><p>\u4F46\u662F\u5982\u679C\u5BF9\u8C61\u7684key\u76F8\u540C\uFF0C\u90A3\u4E48\u4F1A\u53D6\u7EC4\u4EF6\u5BF9\u8C61\u7684\u952E\u503C\u5BF9\uFF1B</p></li></ul></li></ul><h3 id="_13-1-3-\u5168\u5C40\u6DF7\u5165mixin" tabindex="-1">13.1.3 \u5168\u5C40\u6DF7\u5165Mixin <a class="header-anchor" href="#_13-1-3-\u5168\u5C40\u6DF7\u5165mixin" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u7EC4\u4EF6\u4E2D\u7684\u67D0\u4E9B\u9009\u9879\uFF0C\u662F\u6240\u6709\u7684\u7EC4\u4EF6\u90FD\u9700\u8981\u62E5\u6709\u7684\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u5168\u5C40\u7684mixin\uFF1A</p><ul><li><p>\u5168\u5C40\u7684Mixin\u53EF\u4EE5\u4F7F\u7528 \u5E94\u7528app\u7684\u65B9\u6CD5 mixin \u6765\u5B8C\u6210\u6CE8\u518C\uFF1B</p></li><li><p>\u4E00\u65E6\u6CE8\u518C\uFF0C\u90A3\u4E48\u5168\u5C40\u6DF7\u5165\u7684\u9009\u9879\u5C06\u4F1A\u5F71\u54CD\u6BCF\u4E00\u4E2A\u7EC4\u4EF6\uFF1B</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mixin</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">created</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;global mixin created&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre></div></li></ul></li></ul><h2 id="_13-2-composition-api\u57FA\u7840" tabindex="-1">13.2 Composition API\u57FA\u7840 <a class="header-anchor" href="#_13-2-composition-api\u57FA\u7840" aria-hidden="true">#</a></h2><ul><li>\u5982\u679C\u6211\u4EEC\u80FD\u5C06\u540C\u4E00\u4E2A\u903B\u8F91\u5173\u6CE8 \u70B9\u76F8\u5173\u7684\u4EE3\u7801\u6536\u96C6\u5728\u4E00\u8D77\u4F1A\u66F4 \u597D\u3002</li><li>\u8FD9\u5C31\u662FComposition API\u60F3 \u8981\u505A\u7684\u4E8B\u60C5\uFF0C\u4EE5\u53CA\u53EF\u4EE5\u5E2E\u52A9\u6211 \u4EEC\u5B8C\u6210\u7684\u4E8B\u60C5\u3002</li><li><code>setup()</code> \u8FD9\u4E2A\u94A9\u5B50\u5728\u4EE5\u4E0B\u60C5\u51B5\u4E0B\uFF0C\u4F5C\u4E3A\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u7EC4\u5408\u5F0F API \u7684\u5165\u53E3\u3002 <ol><li>\u4E0D\u642D\u914D\u6784\u5EFA\u6B65\u9AA4\u4F7F\u7528\u7EC4\u5408\u5F0F API\u3002</li><li>\u5728\u9009\u9879\u5F0F API \u7EC4\u4EF6\u4E2D\u96C6\u6210\u57FA\u4E8E\u7EC4\u5408\u5F0F API \u7684\u4EE3\u7801\u3002</li><li>\u6BD4\u5982\u66FF\u4EE3methods\u3001computed\u3001watch\u3001data\u3001\u751F\u547D\u5468\u671F\u7B49\u7B49\uFF1B</li></ol></li></ul><h3 id="_13-2-1-setup\u51FD\u6570\u7684\u53C2\u6570" tabindex="-1">13.2.1 setup\u51FD\u6570\u7684\u53C2\u6570 <a class="header-anchor" href="#_13-2-1-setup\u51FD\u6570\u7684\u53C2\u6570" aria-hidden="true">#</a></h3><ul><li><p>setup\u51FD\u6570\u7684\u53C2\u6570\uFF0C\u5B83\u4E3B\u8981\u6709\u4E24\u4E2A\u53C2\u6570\uFF1A</p><ul><li><p>\u7B2C\u4E00\u4E2A\u53C2\u6570\uFF1A<code>props</code></p></li><li><p>\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF1A<code>context</code></p></li></ul></li><li><p>props\u975E\u5E38\u597D\u7406\u89E3\uFF0C\u5B83\u5176\u5B9E\u5C31\u662F\u7236\u7EC4\u4EF6\u4F20\u9012\u8FC7\u6765\u7684\u5C5E\u6027\u4F1A\u88AB\u653E\u5230props\u5BF9\u8C61\u4E2D\uFF0C\u6211\u4EEC\u5728setup\u4E2D\u5982\u679C\u9700\u8981\u4F7F\u7528\uFF0C\u90A3\u4E48\u5C31\u53EF \u4EE5\u76F4\u63A5\u901A\u8FC7props\u53C2\u6570\u83B7\u53D6\uFF1A</p><ul><li><p>\u5BF9\u4E8E<code>\u5B9A\u4E49props\u7684\u7C7B\u578B</code>\uFF0C\u6211\u4EEC\u8FD8\u662F\u548C\u4E4B\u524D\u7684\u89C4\u5219\u662F\u4E00\u6837\u7684\uFF0C\u5728props\u9009\u9879\u4E2D\u5B9A\u4E49\uFF1B</p></li><li><p>\u5E76\u4E14\u5728template\u4E2D\u4F9D\u7136\u662F\u53EF\u4EE5\u6B63\u5E38\u53BB\u4F7F\u7528props\u4E2D\u7684\u5C5E\u6027\uFF0C\u6BD4\u5982message\uFF1B</p></li><li><p>\u5982\u679C\u6211\u4EEC\u5728setup\u51FD\u6570\u4E2D\u60F3\u8981\u4F7F\u7528props\uFF0C\u90A3\u4E48\u4E0D\u53EF\u4EE5\u901A\u8FC7 this \u53BB\u83B7\u53D6\uFF1B</p></li><li><p>\u56E0\u4E3Aprops\u6709<code>\u76F4\u63A5\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u5230setup\u51FD\u6570</code>\u4E2D\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u53C2\u6570\u6765\u4F7F\u7528\u5373\u53EF\uFF1B</p></li></ul></li><li><p>\u53E6\u5916\u4E00\u4E2A\u53C2\u6570\u662Fcontext\uFF0C\u6211\u4EEC\u4E5F\u79F0\u4E4B\u4E3A\u662F\u4E00\u4E2ASetupContext\uFF0C\u5B83\u91CC\u9762\u5305\u542B\u4E09\u4E2A\u5C5E\u6027\uFF1A</p><ul><li><p>attrs\uFF1A\u6240\u6709\u7684\u975Eprop\u7684attribute\uFF1B</p></li><li><p>slots\uFF1A\u7236\u7EC4\u4EF6\u4F20\u9012\u8FC7\u6765\u7684\u63D2\u69FD\uFF08\u8FD9\u4E2A\u5728\u4EE5\u6E32\u67D3\u51FD\u6570\u8FD4\u56DE\u65F6\u4F1A\u6709\u4F5C\u7528)\uFF1B</p></li><li><p>emit\uFF1A\u5F53\u6211\u4EEC\u7EC4\u4EF6\u5185\u90E8\u9700\u8981\u53D1\u51FA\u4E8B\u4EF6\u65F6\u4F1A\u7528\u5230emit\uFF08\u56E0\u4E3A\u6211\u4EEC\u4E0D\u80FD\u8BBF\u95EEthis\uFF0C\u6240\u4EE5\u4E0D\u53EF\u4EE5\u901A\u8FC7 this.$emit\u53D1\u51FA\u4E8B\u4EF6\uFF09\uFF1B</p></li></ul></li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     * \u53C2\u6570\u4E00: props, \u7236\u7EC4\u4EF6\u4F20\u9012\u8FC7\u6765\u5C5E\u6027</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// setup(props, context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">, {</span><span style="color:#E06C75;">attrs</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">slots</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">emit</span><span style="color:#ABB2BF;">}) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">attrs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">attrs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">slots</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">emit</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello Home&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-2-2-setup\u7684\u8FD4\u56DE\u503C" tabindex="-1">13.2.2 setup\u7684\u8FD4\u56DE\u503C <a class="header-anchor" href="#_13-2-2-setup\u7684\u8FD4\u56DE\u503C" aria-hidden="true">#</a></h3><ul><li><p>setup\u7684\u8FD4\u56DE\u503C\u53EF\u4EE5\u5728\u6A21\u677Ftemplate\u4E2D\u88AB\u4F7F\u7528\uFF1B</p></li><li><p>\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7setup\u7684\u8FD4\u56DE\u503C\u6765\u66FF\u4EE3data\u9009\u9879\uFF1B</p></li><li><p>\u751A\u81F3\u662F\u6211\u4EEC\u53EF\u4EE5\u8FD4\u56DE\u4E00\u4E2A\u6267\u884C\u51FD\u6570\u6765\u4EE3\u66FF\u5728methods\u4E2D\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF1A</p><p><code>\u793A\u4F8B:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Home Page</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;\u5F53\u524D\u8BA1\u6570: </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#FFFFFF;">@click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFFFFF;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;font-style:italic;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">required</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      let </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u5C40\u90E8\u51FD\u6570</span></span>
<span class="line"><span style="color:#ABB2BF;">      const </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      return {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello Home&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">}</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFFFFF;">&lt;style</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>setup()</code> \u81EA\u8EAB\u5E76\u4E0D\u542B\u5BF9\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u8BBF\u95EE\u6743\uFF0C\u5373\u5728 <code>setup()</code> \u4E2D\u8BBF\u95EE <code>this</code> \u4F1A\u662F <code>undefined</code>\u3002\u4F60\u53EF\u4EE5\u5728\u9009\u9879\u5F0F API \u4E2D\u8BBF\u95EE\u7EC4\u5408\u5F0F API \u66B4\u9732\u7684\u503C\uFF0C\u4F46\u53CD\u8FC7\u6765\u5219\u4E0D\u884C\u3002</p></div><p><code>\u9876\u5C42setup\u7684\u4F7F\u7528</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;Hello World&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">emitEvent</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;\u53D1\u5C04\u4E8B\u4EF6&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineProps</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">defineEmit</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">defineProps</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;\u54C8\u54C8\u54C8&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">emit</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">defineEmit</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;increment&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;decrement&quot;</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">emitEvent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;increment&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;100000&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-2-3-reactive-api\u7684\u4F7F\u7528" tabindex="-1">13.2.3 Reactive API\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-2-3-reactive-api\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u60F3\u4E3A\u5728setup\u4E2D\u5B9A\u4E49\u7684\u6570\u636E\u63D0\u4F9B\u54CD\u5E94\u5F0F\u7684\u7279\u6027\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528reactive\u7684\u51FD\u6570\uFF1A</p><p><code>\u4F8B:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u5C40\u90E8\u51FD\u6570</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u539F\u56E0\uFF1A</p><ul><li><p>\u8FD9\u662F\u56E0\u4E3A\u5F53\u6211\u4EEC\u4F7F\u7528reactive\u51FD\u6570\u5904\u7406\u6211\u4EEC\u7684\u6570\u636E\u4E4B\u540E\uFF0C\u6570\u636E\u518D\u6B21\u88AB\u4F7F\u7528\u65F6\u5C31\u4F1A\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\uFF1B</p></li><li><p>\u5F53\u6570\u636E\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u6240\u6709\u6536\u96C6\u5230\u7684\u4F9D\u8D56\u90FD\u662F\u8FDB\u884C\u5BF9\u5E94\u7684\u54CD\u5E94\u5F0F\u64CD\u4F5C\uFF08\u6BD4\u5982\u66F4\u65B0\u754C\u9762\uFF09\uFF1B</p></li><li><p>\u4E8B\u5B9E\u4E0A\uFF0C\u6211\u4EEC\u7F16\u5199\u7684data\u9009\u9879\uFF0C\u4E5F\u662F\u5728\u5185\u90E8\u4EA4\u7ED9\u4E86reactive\u51FD\u6570\u5C06\u5176\u7F16\u7A0B\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\uFF1B</p></li></ul></li></ul><h3 id="_13-2-4-ref-api\u7684\u4F7F\u7528" tabindex="-1">13.2.4 Ref API\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-2-4-ref-api\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><p>reactive API\u5BF9\u4F20\u5165\u7684\u7C7B\u578B\u662F\u6709\u9650\u5236\u7684\uFF0C\u5B83\u8981\u6C42\u6211\u4EEC\u5FC5\u987B\u4F20\u5165\u7684\u662F\u4E00\u4E2A\u5BF9\u8C61\u6216\u8005\u6570\u7EC4\u7C7B\u578B\uFF1A</p><ul><li>\u5982\u679C\u6211\u4EEC\u4F20\u5165\u4E00\u4E2A\u57FA\u672C\u6570\u636E\u7C7B\u578B\uFF08String\u3001Number\u3001Boolean\uFF09\u4F1A\u62A5\u4E00\u4E2A\u8B66\u544A\uFF1B</li></ul></li><li><p>Vue3\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u53E6\u5916\u4E00\u4E2AAPI\uFF1A<code>ref API</code></p><ul><li><p><code>ref </code>\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u53EF\u53D8\u7684<code>\u54CD\u5E94\u5F0F\u5BF9\u8C61</code>\uFF0C\u8BE5\u5BF9\u8C61\u4F5C\u4E3A\u4E00\u4E2A \u54CD\u5E94\u5F0F\u7684\u5F15\u7528 \u7EF4\u62A4\u7740\u5B83\u5185\u90E8\u7684\u503C\uFF0C\u8FD9\u5C31\u662Fref\u540D\u79F0\u7684\u6765\u6E90\uFF1B \u5B83\u5185\u90E8\u7684\u503C\u662F\u5728ref\u7684 value \u5C5E\u6027\u4E2D\u88AB\u7EF4\u62A4\u7684\uFF1B</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">message</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello World!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div></li></ul></li><li><p>\u8FD9\u91CC\u6709\u4E24\u4E2A\u6CE8\u610F\u4E8B\u9879\uFF1A</p><ul><li><p>\u5728\u6A21\u677F\u4E2D\u5F15\u5165ref\u7684\u503C\u65F6\uFF0CVue\u4F1A\u81EA\u52A8\u5E2E\u52A9\u6211\u4EEC\u8FDB\u884C\u89E3\u5305\u64CD\u4F5C\uFF0C\u6240\u4EE5\u6211\u4EEC\u5E76\u4E0D\u9700\u8981\u5728\u6A21\u677F\u4E2D\u901A\u8FC7 ref.value \u7684\u65B9\u5F0F \u6765\u4F7F\u7528\uFF1B</p></li><li><p>\u4F46\u662F\u5728 setup \u51FD\u6570\u5185\u90E8\uFF0C\u5B83\u4F9D\u7136\u662F\u4E00\u4E2A ref\u5F15\u7528\uFF0C \u6240\u4EE5\u5BF9\u5176\u8FDB\u884C\u64CD\u4F5C\u65F6\uFF0C\u6211\u4EEC\u4F9D\u7136\u9700\u8981\u4F7F\u7528 ref.value\u7684\u65B9\u5F0F\uFF1B</p></li></ul></li></ul><h3 id="_13-2-5-ref\u6D45\u5C42\u7684\u89E3\u5305" tabindex="-1">13.2.5 ref\u6D45\u5C42\u7684\u89E3\u5305 <a class="header-anchor" href="#_13-2-5-ref\u6D45\u5C42\u7684\u89E3\u5305" aria-hidden="true">#</a></h3><ul><li><p>\u6A21\u677F\u4E2D\u7684\u89E3\u5305\u662F\u6D45\u5C42\u7684\u89E3\u5305\uFF0C\u5982\u679C\u6211\u4EEC\u7684\u4EE3\u7801\u662F\u4E0B\u9762\u7684\u65B9\u5F0F\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Home Page</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- \u5F53\u6211\u4EEC\u5728template\u6A21\u677F\u4E2D\u4F7F\u7528ref\u5BF9\u8C61, \u5B83\u4F1A\u81EA\u52A8\u8FDB\u884C\u89E3\u5305 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;\u5F53\u524D\u8BA1\u6570: {{</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- ref\u7684\u89E3\u5305\u53EA\u80FD\u662F\u4E00\u4E2A\u6D45\u5C42\u89E3\u5305(info\u662F\u4E00\u4E2A\u666E\u901A\u7684JavaScript\u5BF9\u8C61) --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;\u5F53\u524D\u8BA1\u6570: {{</span><span style="color:#E5C07B;">info</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;+1&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">required</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u5C40\u90E8\u51FD\u6570</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">reactiveInfo</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u5982\u679C\u6211\u4EEC\u5C06ref\u653E\u5230\u4E00\u4E2Areactive\u7684\u5C5E\u6027\u5F53\u4E2D\uFF0C\u90A3\u4E48\u5728\u6A21\u677F\u4E2D\u4F7F\u7528\u65F6\uFF0C\u5B83\u4F1A\u81EA\u52A8\u89E3\u5305\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Home Page</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- \u5F53\u5982\u679C\u6700\u5916\u5C42\u5305\u88F9\u7684\u662F\u4E00\u4E2Areactive\u53EF\u54CD\u5E94\u5F0F\u5BF9\u8C61, \u90A3\u4E48\u5185\u5BB9\u7684ref\u53EF\u4EE5\u89E3\u5305 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;\u5F53\u524D\u8BA1\u6570: {{</span><span style="color:#E5C07B;">reactiveInfo</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;+1&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">required</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">reactiveInfo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u5C40\u90E8\u51FD\u6570</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">reactiveInfo</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="_13-2-6-readonly\u7684\u4F7F\u7528" tabindex="-1">13.2.6 readonly\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-2-6-readonly\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li>\u6211\u4EEC\u901A\u8FC7reactive\u6216\u8005ref\u53EF\u4EE5\u83B7\u53D6\u5230\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684\u5BF9\u8C61\uFF0C\u4F46\u662F\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4F20\u5165\u7ED9\u5176\u4ED6\u5730\u65B9\uFF08\u7EC4\u4EF6\uFF09\u7684\u8FD9\u4E2A \u54CD\u5E94\u5F0F\u5BF9\u8C61\u5E0C\u671B\u5728\u53E6\u5916\u4E00\u4E2A\u5730\u65B9\uFF08\u7EC4\u4EF6\uFF09\u88AB\u4F7F\u7528\uFF0C\u4F46\u662F\u4E0D\u80FD\u88AB\u4FEE\u6539\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5982\u4F55\u9632\u6B62\u8FD9\u79CD\u60C5\u51B5\u7684\u51FA\u73B0\u5462\uFF1F</li><li>Vue3\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86readonly\u7684\u65B9\u6CD5\uFF1B</li><li>readonly\u4F1A\u8FD4\u56DE\u539F\u751F\u5BF9\u8C61\u7684\u53EA\u8BFB\u4EE3\u7406\uFF08\u4E5F\u5C31\u662F\u5B83\u4F9D\u7136\u662F\u4E00\u4E2AProxy\uFF0C\u8FD9\u662F\u4E00\u4E2Aproxy\u7684set\u65B9\u6CD5\u88AB\u52AB\u6301\uFF0C\u5E76\u4E14\u4E0D \u80FD\u5BF9\u5176\u8FDB\u884C\u4FEE\u6539\uFF09\uFF1B</li><li>\u5728\u5F00\u53D1\u4E2D\u5E38\u89C1\u7684readonly\u65B9\u6CD5\u4F1A\u4F20\u5165\u4E09\u4E2A\u7C7B\u578B\u7684\u53C2\u6570\uFF1A <ul><li>\u7C7B\u578B\u4E00\uFF1A\u666E\u901A\u5BF9\u8C61\uFF1B</li><li>\u7C7B\u578B\u4E8C\uFF1Areactive\u8FD4\u56DE\u7684\u5BF9\u8C61\uFF1B</li><li>\u7C7B\u578B\u4E09\uFF1Aref\u7684\u5BF9\u8C61\uFF1B</li></ul></li></ul><p><code>\u89C4\u5219\uFF1A</code></p><ul><li><p>readonly\u8FD4\u56DE\u7684\u5BF9\u8C61\u90FD\u662F\u4E0D\u5141\u8BB8\u4FEE\u6539\u7684\uFF1B</p></li><li><p>\u4F46\u662F\u7ECF\u8FC7readonly\u5904\u7406\u7684\u539F\u6765\u7684\u5BF9\u8C61\u662F\u5141\u8BB8\u88AB\u4FEE\u6539\u7684\uFF1B</p><ul><li><p>\u6BD4\u5982 <code>const info = readonly(obj)</code>\uFF0Cinfo\u5BF9\u8C61\u662F\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539\u7684\uFF1B</p></li><li><p>\u5F53obj\u88AB\u4FEE\u6539\u65F6\uFF0Creadonly\u8FD4\u56DE\u7684info\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u4FEE\u6539\uFF1B</p></li><li><p>\u4F46\u662F\u6211\u4EEC<code>\u4E0D\u80FD\u53BB\u4FEE\u6539readonly\u8FD4\u56DE\u7684\u5BF9\u8C61info</code>\uFF1B</p></li></ul></li><li><p>\u5176\u5B9E\u672C\u8D28\u4E0A\u5C31\u662F<code>readonly\u8FD4\u56DE\u7684\u5BF9\u8C61\u7684setter\u65B9\u6CD5</code>\u88AB\u52AB\u6301\u4E86\u800C\u5DF2\uFF1B</p></li></ul><p><code>\u793A\u4F8B\uFF1A</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">updateState</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;\u4FEE\u6539\u72B6\u6001&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 1.\u666E\u901A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info1</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">readonlyInfo1</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 2.\u54CD\u5E94\u5F0F\u7684\u5BF9\u8C61reactive</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info2</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;why&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">readonlyInfo2</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 3.\u54CD\u5E94\u5F0F\u7684\u5BF9\u8C61ref</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info3</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">readonlyInfo3</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">updateState</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// readonlyInfo3.value = &quot;coderwhy&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">info3</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;coderwhy&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">updateState</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-3-reactiveapi\u7684\u8865\u5145" tabindex="-1">13.3 ReactiveAPI\u7684\u8865\u5145 <a class="header-anchor" href="#_13-3-reactiveapi\u7684\u8865\u5145" aria-hidden="true">#</a></h2><h3 id="_13-3-1-reactive\u5224\u65AD\u7684api" tabindex="-1">13.3.1 Reactive\u5224\u65AD\u7684API <a class="header-anchor" href="#_13-3-1-reactive\u5224\u65AD\u7684api" aria-hidden="true">#</a></h3><ul><li>isProxy <ul><li>\u68C0\u67E5\u5BF9\u8C61<strong>\u662F\u5426\u662F\u7531 reactive \u6216 readonly\u521B\u5EFA\u7684 proxy</strong>\u3002</li></ul></li><li>isReactive <ul><li>\u68C0\u67E5\u5BF9\u8C61<strong>\u662F\u5426\u662F\u7531 reactive\u521B\u5EFA\u7684\u54CD\u5E94\u5F0F\u4EE3\u7406</strong>\uFF1A</li><li>\u5982\u679C<strong>\u8BE5\u4EE3\u7406\u662F readonly \u5EFA\u7684</strong>\uFF0C\u4F46<strong>\u5305\u88F9\u4E86\u7531 reactive \u521B\u5EFA\u7684\u53E6\u4E00\u4E2A\u4EE3\u7406</strong>\uFF0C\u5B83\u4E5F\u4F1A\u8FD4\u56DE true\uFF1B</li></ul></li><li>isReadonly <ul><li>\u68C0\u67E5\u5BF9\u8C61<strong>\u662F\u5426\u662F\u7531 readonly \u521B\u5EFA\u7684\u53EA\u8BFB\u4EE3\u7406</strong>\u3002</li></ul></li><li>toRaw <ul><li>\u8FD4\u56DE <strong>reactive \u6216 readonly \u4EE3\u7406\u7684\u539F\u59CB\u5BF9\u8C61</strong>\uFF08\u4E0D\u5EFA\u8BAE\u4FDD\u7559\u5BF9\u539F\u59CB\u5BF9\u8C61\u7684\u6301\u4E45\u5F15\u7528\u3002\u8BF7\u8C28\u614E\u4F7F\u7528\uFF09\u3002</li></ul></li><li>shallowReactive <ul><li>\u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0F\u4EE3\u7406\uFF0C\u5B83\u8DDF\u8E2A\u5176\u81EA\u8EAB property \u7684\u54CD\u5E94\u6027\uFF0C\u4F46<strong>\u4E0D\u6267\u884C\u5D4C\u5957\u5BF9\u8C61\u7684\u6DF1\u5C42\u54CD\u5E94\u5F0F\u8F6C\u6362</strong> (\u6DF1\u5C42\u8FD8\u662F\u539F\u751F\u5BF9\u8C61)\u3002</li></ul></li><li>shallowReadonly <ul><li>\u521B\u5EFA\u4E00\u4E2A proxy\uFF0C\u4F7F\u5176\u81EA\u8EAB\u7684 property \u4E3A\u53EA\u8BFB\uFF0C\u4F46<strong>\u4E0D\u6267\u884C\u5D4C\u5957\u5BF9\u8C61\u7684\u6DF1\u5EA6\u53EA\u8BFB\u8F6C\u6362</strong>\uFF08\u6DF1\u5C42\u8FD8\u662F\u53EF\u8BFB\u3001\u53EF\u5199\u7684\uFF09\u3002</li></ul></li></ul><h3 id="_13-3-2-torefs\u548Ctoref\u7684\u4F7F\u7528" tabindex="-1">13.3.2 toRefs\u548CtoRef\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-3-2-torefs\u548Ctoref\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u6211\u4EEC\u4F7F\u7528ES6\u7684\u89E3\u6784\u8BED\u6CD5\uFF0C\u5BF9reactive\u8FD4\u56DE\u7684\u5BF9\u8C61\u8FDB\u884C\u89E3\u6784\u83B7\u53D6\u503C\uFF0C\u90A3\u4E48\u4E4B\u540E\u65E0\u8BBA\u662F\u4FEE\u6539\u7ED3\u6784\u540E\u7684\u53D8\u91CF\uFF0C\u8FD8\u662F\u4FEE\u6539reactive \u8FD4\u56DE\u7684state\u5BF9\u8C61\uFF0C<code>\u6570\u636E\u90FD\u4E0D\u518D\u662F\u54CD\u5E94\u5F0F</code>\u7684\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">age</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">age</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u90A3\u4E48\u6709\u6CA1\u6709\u529E\u6CD5\u8BA9\u6211\u4EEC\u89E3\u6784\u51FA\u6765\u7684\u5C5E\u6027\u662F\u54CD\u5E94\u5F0F\u7684\u5462\uFF1F</p></li><li><p>Vue\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u4E2AtoRefs\u7684\u51FD\u6570\uFF0C\u53EF\u4EE5\u5C06reactive\u8FD4\u56DE\u7684\u5BF9\u8C61\u4E2D\u7684\u5C5E\u6027\u90FD\u8F6C\u6210ref\uFF1B</p></li><li><p>\u90A3\u4E48\u6211\u4EEC\u518D\u6B21\u8FDB\u884C\u7ED3\u6784\u51FA\u6765\u7684 name \u548C age \u672C\u8EAB\u90FD\u662F ref\u7684\uFF1B</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// \u5F53\u6211\u4EEC\u8FD9\u6837\u505A\u7684\u65F6\u5019\uFF0C\u4F1A\u8FD4\u56DE\u4E24\u4E2Aref\u5BF9\u8C61,\u5B83\u4EEC\u662F\u54CD\u5E94\u5F0F</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u8FD9\u79CD\u505A\u6CD5\u76F8\u5F53\u4E8E\u5DF2\u7ECF\u5728state.name\u548Cref.value\u4E4B\u95F4\u5EFA\u7ACB\u4E86 \u94FE\u63A5\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u4FEE\u6539\u90FD\u4F1A\u5F15\u8D77\u53E6\u5916\u4E00\u4E2A\u53D8\u5316\uFF1B</p></li></ul><p><code>toRef</code></p><ul><li><p>\u5982\u679C\u6211\u4EEC\u53EA\u5E0C\u671B\u8F6C\u6362\u4E00\u4E2Areactive\u5BF9\u8C61\u4E2D\u7684\u5C5E\u6027\u4E3Aref, \u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528toRef\u7684\u65B9\u6CD5\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// \u5982\u679C\u6211\u4EEC\u53EA\u5E0C\u671B\u8F6C\u6362\u4E00\u4E2Areactive\u5BF9\u8C61\u4E2D\u7684\u5C5E\u6027\u4E3Aref,\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528toRef\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRef</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;name&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">age</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">changeName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="_13-3-3-ref\u5176\u4ED6\u7684api" tabindex="-1">13.3.3 ref\u5176\u4ED6\u7684API <a class="header-anchor" href="#_13-3-3-ref\u5176\u4ED6\u7684api" aria-hidden="true">#</a></h3><ul><li><p>unref</p></li><li><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u83B7\u53D6\u4E00\u4E2Aref\u5F15\u7528\u4E2D\u7684value\uFF0C\u90A3\u4E48\u4E5F\u53EF\u4EE5\u901A\u8FC7unref\u65B9\u6CD5\uFF1A</p><ul><li><p>\u5982\u679C\u53C2\u6570\u662F\u4E00\u4E2A ref\uFF0C\u5219\u8FD4\u56DE\u5185\u90E8\u503C\uFF0C\u5426\u5219\u8FD4\u56DE\u53C2\u6570\u672C\u8EAB\uFF1B</p></li><li><p>\u8FD9\u662F val = isRef(val) ? val.value : val \u7684\u8BED\u6CD5\u7CD6\u51FD\u6570\uFF1B</p></li></ul></li><li><p>isRef</p><ul><li>\u5224\u65AD\u503C\u662F\u5426\u662F\u4E00\u4E2Aref\u5BF9\u8C61\u3002</li></ul></li><li><p>shallowRef</p><ul><li>\u521B\u5EFA\u4E00\u4E2A\u6D45\u5C42\u7684ref\u5BF9\u8C61\uFF1B</li></ul></li><li><p>triggerRef</p><ul><li><p>\u624B\u52A8\u89E6\u53D1\u548C shallowRef \u76F8\u5173\u8054\u7684\u526F\u4F5C\u7528\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">changeInfo</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;\u4FEE\u6539Info&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">shallowRef</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">triggerRef</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">info</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">shallowRef</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">changeInfo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">info</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;james&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//\u624B\u52A8\u89E6\u53D1</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">triggerRef</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">changeInfo</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul></li></ul><h3 id="_13-3-4-\u81EA\u5B9A\u4E49ref" tabindex="-1">13.3.4 \u81EA\u5B9A\u4E49ref <a class="header-anchor" href="#_13-3-4-\u81EA\u5B9A\u4E49ref" aria-hidden="true">#</a></h3><ul><li><p>\u521B\u5EFA\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684 ref\uFF0C\u663E\u5F0F\u58F0\u660E\u5BF9\u5176\u4F9D\u8D56\u8FFD\u8E2A\u548C\u66F4\u65B0\u89E6\u53D1\u7684\u63A7\u5236\u65B9\u5F0F\u3002</p></li><li><p>\u8BE6\u7EC6\u4FE1\u606F</p><p><code>customRef()</code> \u9884\u671F\u63A5\u6536\u4E00\u4E2A\u5DE5\u5382\u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\uFF0C\u8FD9\u4E2A\u5DE5\u5382\u51FD\u6570\u63A5\u53D7 <code>track</code> \u548C <code>trigger</code> \u4E24\u4E2A\u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\uFF0C\u5E76\u8FD4\u56DE\u4E00\u4E2A\u5E26\u6709 <code>get</code> \u548C <code>set</code> \u65B9\u6CD5\u7684\u5BF9\u8C61\u3002</p><p>\u4E00\u822C\u6765\u8BF4\uFF0C<code>track()</code> \u5E94\u8BE5\u5728 <code>get()</code> \u65B9\u6CD5\u4E2D\u8C03\u7528\uFF0C\u800C <code>trigger()</code> \u5E94\u8BE5\u5728 <code>set()</code> \u4E2D\u8C03\u7528\u3002\u7136\u800C\u4E8B\u5B9E\u4E0A\uFF0C\u4F60\u5BF9\u4F55\u65F6\u8C03\u7528\u3001\u662F\u5426\u5E94\u8BE5\u8C03\u7528\u4ED6\u4EEC\u6709\u5B8C\u5168\u7684\u63A7\u5236\u6743\u3002</p></li></ul><p><code>\u5B9E\u73B0\uFF1A</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">customRef</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u81EA\u5B9A\u4E49ref</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">300</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">customRef</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">track</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">trigger</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">track</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#56B6C2;">clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">trigger</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>\u5E94\u7528\uFF1A</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">debounceRef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./hook/useDebounceRef&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">message</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">debounceRef</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello World&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">message</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-4-\u8BA1\u7B97\u5C5E\u6027computed\u57FA\u672C\u4F7F\u7528" tabindex="-1">13.4 \u8BA1\u7B97\u5C5E\u6027computed\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_13-4-\u8BA1\u7B97\u5C5E\u6027computed\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h2><ul><li><p>\u5728 setup \u51FD\u6570\u4E2D\u4F7F\u7528 computed \uFF1A</p><ul><li><p>\u65B9\u5F0F\u4E00\uFF1A\u63A5\u6536\u4E00\u4E2Agetter\u51FD\u6570\uFF0C\u5E76\u4E3A getter \u51FD\u6570\u8FD4\u56DE\u7684\u503C\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u4E0D\u53D8\u7684 ref \u5BF9\u8C61\uFF1B</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 1.\u7528\u6CD5\u4E00: \u4F20\u5165\u4E00\u4E2Agetter\u51FD\u6570</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// computed\u7684\u8FD4\u56DE\u503C\u662F\u4E00\u4E2Aref\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u65B9\u5F0F\u4E8C\uFF1A\u63A5\u6536\u4E00\u4E2A\u5177\u6709 get \u548C set \u7684\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u53EF\u53D8\u7684\uFF08\u53EF\u8BFB\u5199\uFF09ref \u5BF9\u8C61\uFF1B computed</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 2.\u7528\u6CD5\u4E8C: \u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61, \u5BF9\u8C61\u5305\u542Bgetter/setter</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">names</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">newValue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">names</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">names</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre></div></li></ul></li></ul><h2 id="_13-5-\u4FA6\u542C\u6570\u636E\u53D8\u5316" tabindex="-1">13.5 \u4FA6\u542C\u6570\u636E\u53D8\u5316 <a class="header-anchor" href="#_13-5-\u4FA6\u542C\u6570\u636E\u53D8\u5316" aria-hidden="true">#</a></h2><ul><li>\u5728<code>Options API</code>\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7<code>watch</code>\u9009\u9879\u6765\u4FA6\u542C<code>data</code>\u6216\u8005<code>props</code>\u7684<strong>\u6570\u636E\u53D8\u5316</strong>\uFF0C\u5F53\u6570\u636E\u53D8\u5316\u65F6\u6267\u884C\u67D0\u4E00\u4E9B \u64CD\u4F5C\u3002</li><li>\u5728<code>Composition API</code>\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528<code>watchEffect</code>\u548C<code>watch</code>\u6765\u5B8C\u6210<strong>\u54CD\u5E94\u5F0F\u6570\u636E\u7684\u4FA6\u542C</strong>\uFF1B <ul><li><code>watchEffect</code>\u7528\u4E8E<strong>\u81EA\u52A8\u6536\u96C6\u54CD\u5E94\u5F0F\u6570\u636E\u7684\u4F9D\u8D56</strong>\uFF1B</li><li><code>watch</code><strong>\u9700\u8981\u624B\u52A8\u6307\u5B9A\u4FA6\u542C\u7684\u6570\u636E\u6E90</strong>\uFF1B</li></ul></li></ul><h3 id="_13-5-1-watcheffect\u57FA\u672C\u4F7F\u7528" tabindex="-1">13.5.1 watchEffect\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_13-5-1-watcheffect\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><p>\u5F53\u4FA6\u542C\u5230\u67D0\u4E9B\u54CD\u5E94\u5F0F\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u6211\u4EEC\u5E0C\u671B\u6267\u884C\u67D0\u4E9B\u64CD\u4F5C\uFF0C\u8FD9\u4E2A\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528 <code>watchEffect</code>\u3002</p></li><li><p>\u9996\u5148\uFF0C<code>watchEffect</code>\u4F20\u5165\u7684\u51FD\u6570\u4F1A\u88AB\u7ACB\u5373\u6267\u884C\u4E00\u6B21\uFF0C\u5E76\u4E14\u5728\u6267\u884C\u7684\u8FC7\u7A0B\u4E2D\u4F1A\u6536\u96C6\u4F9D\u8D56\uFF1B</p></li><li><p>\u5176\u6B21\uFF0C\u53EA\u6709\u6536\u96C6\u7684\u4F9D\u8D56\u53D1\u751F\u53D8\u5316\u65F6\uFF0CwatchEffect\u4F20\u5165\u7684\u51FD\u6570\u624D\u4F1A\u518D\u6B21\u6267\u884C\uFF1B</p></li></ul><p><code>\u793A\u4F8B:</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">changeName</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;\u4FEE\u6539name&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watchEffect</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// watchEffect: \u81EA\u52A8\u6536\u96C6\u54CD\u5E94\u5F0F\u7684\u4F9D\u8D56</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;why&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">changeName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;kobe&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">changeName</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-5-2-watcheffect\u505C\u6B62\u4FA6\u542C" tabindex="-1">13.5.2 watchEffect\u505C\u6B62\u4FA6\u542C <a class="header-anchor" href="#_13-5-2-watcheffect\u505C\u6B62\u4FA6\u542C" aria-hidden="true">#</a></h3><ul><li>\u5982\u679C\u5728\u53D1\u751F\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5E0C\u671B\u505C\u6B62\u4FA6\u542C\uFF0C\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u53EF\u4EE5\u83B7\u53D6watchEffect\u7684\u8FD4\u56DE\u503C\u51FD\u6570\uFF0C\u8C03\u7528\u8BE5\u51FD\u6570\u5373\u53EF</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;age:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">age</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">changeAge</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">age</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">age</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">25</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">stop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-5-3-watcheffect\u6E05\u9664\u526F\u4F5C\u7528" tabindex="-1">13.5.3 watchEffect\u6E05\u9664\u526F\u4F5C\u7528 <a class="header-anchor" href="#_13-5-3-watcheffect\u6E05\u9664\u526F\u4F5C\u7528" aria-hidden="true">#</a></h3><ul><li><p>\u4EC0\u4E48\u662F\u6E05\u9664\u526F\u4F5C\u7528\u5462\uFF1F</p><ul><li><p>\u6BD4\u5982\u5728\u5F00\u53D1\u4E2D\u6211\u4EEC\u9700\u8981\u5728\u4FA6\u542C\u51FD\u6570\u4E2D\u6267\u884C\u7F51\u7EDC\u8BF7\u6C42\uFF0C\u4F46\u662F\u5728\u7F51\u7EDC\u8BF7\u6C42\u8FD8\u6CA1\u6709\u8FBE\u5230\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u505C\u6B62\u4E86\u4FA6\u542C\u5668\uFF0C \u6216\u8005\u4FA6\u542C\u5668\u4FA6\u542C\u51FD\u6570\u88AB\u518D\u6B21\u6267\u884C\u4E86\u3002</p></li><li><p>\u90A3\u4E48\u4E0A\u4E00\u6B21\u7684\u7F51\u7EDC\u8BF7\u6C42\u5E94\u8BE5\u88AB\u53D6\u6D88\u6389\uFF0C\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u5C31\u53EF\u4EE5\u6E05\u9664\u4E0A\u4E00\u6B21\u7684\u526F\u4F5C\u7528\uFF1B</p></li></ul></li><li><p>\u5728\u6211\u4EEC\u7ED9watchEffect\u4F20\u5165\u7684\u51FD\u6570\u88AB\u56DE\u8C03\u65F6\uFF0C\u5176\u5B9E\u53EF\u4EE5\u83B7\u53D6\u5230\u4E00\u4E2A\u53C2\u6570\uFF1A<code>onInvalidate </code></p><ul><li><p>\u5F53<strong>\u526F\u4F5C\u7528\u5373\u5C06\u91CD\u65B0\u6267\u884C</strong> \u6216\u8005 <strong>\u4FA6\u542C\u5668\u88AB\u505C\u6B62</strong> \u65F6\u4F1A\u6267\u884C\u8BE5\u51FD\u6570\u4F20\u5165\u7684\u56DE\u8C03\u51FD\u6570\uFF1B</p></li><li><p>\u6211\u4EEC\u53EF\u4EE5\u5728\u4F20\u5165\u7684\u56DE\u8C03\u51FD\u6570\u4E2D\uFF0C\u6267\u884C\u4E00\u4E9B\u6E05\u695A\u5DE5\u4F5C\uFF1B</p></li></ul></li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">onInvalidate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">timer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;\u7F51\u7EDC\u8BF7\u6C42\u6210\u529F~&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }, </span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">onInvalidate</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u5728\u8FD9\u4E2A\u51FD\u6570\u4E2D\u6E05\u9664\u989D\u5916\u7684\u526F\u4F5C\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// request.cancel()</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#56B6C2;">clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;onInvalidate&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-5-4-watcheffect\u7684\u6267\u884C\u65F6\u673A" tabindex="-1">13.5.4 watchEffect\u7684\u6267\u884C\u65F6\u673A <a class="header-anchor" href="#_13-5-4-watcheffect\u7684\u6267\u884C\u65F6\u673A" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u6211\u4EEC\u5E0C\u671B\u5728\u7B2C\u4E00\u6B21\u7684\u65F6\u5019\u5C31\u6253\u5370\u51FA\u6765\u5BF9\u5E94\u7684\u5143\u7D20\u5462\uFF1F</p><ul><li>\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u9700\u8981\u6539\u53D8\u526F\u4F5C\u7528\u51FD\u6570\u7684\u6267\u884C\u65F6\u673A\uFF1B</li><li>\u5B83\u7684\u9ED8\u8BA4\u503C\u662Fpre\uFF0C\u5B83\u4F1A\u5728\u5143\u7D20 \u6302\u8F7D \u6216\u8005 \u66F4\u65B0 \u4E4B\u524D\u6267\u884C\uFF1B</li><li>\u6240\u4EE5\u6211\u4EEC\u4F1A\u5148\u6253\u5370\u51FA\u6765\u4E00\u4E2A\u7A7A\u7684\uFF0C\u5F53\u4F9D\u8D56\u7684title\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u5C31\u4F1A\u518D\u6B21\u6267\u884C\u4E00\u6B21\uFF0C\u6253\u5370\u51FA\u5143\u7D20\uFF1B</li></ul></li><li><p>\u6211\u4EEC\u53EF\u4EE5\u8BBE\u7F6E\u526F\u4F5C\u7528\u51FD\u6570\u7684\u6267\u884C\u65F6\u673A\uFF1A</p></li><li><p>\u5982\u679C\u60F3\u5728\u4FA6\u542C\u5668\u56DE\u8C03\u4E2D\u80FD\u8BBF\u95EE\u88AB Vue \u66F4\u65B0<strong>\u4E4B\u540E</strong>\u7684DOM\uFF0C\u4F60\u9700\u8981\u6307\u660E <code>flush: &#39;post&#39;</code> \u9009\u9879\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">&gt;\u54C8\u54C8\u54C8&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watchEffect</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">title</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">title</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">flush</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">title</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="_13-5-5-watch\u7684\u4F7F\u7528" tabindex="-1">13.5.5 Watch\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-5-5-watch\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li>watch\u7684API\u5B8C\u5168\u7B49\u540C\u4E8E\u7EC4\u4EF6watch\u9009\u9879\u7684Property\uFF1A</li><li>watch\u9700\u8981\u4FA6\u542C\u7279\u5B9A\u7684\u6570\u636E\u6E90\uFF0C\u5E76\u5728\u56DE\u8C03\u51FD\u6570\u4E2D\u6267\u884C\u526F\u4F5C\u7528\uFF1B</li><li>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u5B83\u662F\u60F0\u6027\u7684\uFF0C\u53EA\u6709\u5F53\u88AB\u4FA6\u542C\u7684\u6E90\u53D1\u751F\u53D8\u5316\u65F6\u624D\u4F1A\u6267\u884C\u56DE\u8C03\uFF1B</li><li>\u4E0EwatchEffect\u7684\u6BD4\u8F83\uFF0Cwatch\u5141\u8BB8\u6211\u4EEC\uFF1A <ul><li>\u61D2\u6267\u884C\u526F\u4F5C\u7528\uFF08\u7B2C\u4E00\u6B21\u4E0D\u4F1A\u76F4\u63A5\u6267\u884C\uFF09\uFF1B</li><li>\u66F4\u5177\u4F53\u7684\u8BF4\u660E\u5F53\u54EA\u4E9B\u72B6\u6001\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4FA6\u542C\u5668\u7684\u6267\u884C\uFF1B</li><li>\u8BBF\u95EE\u4FA6\u542C\u72B6\u6001\u53D8\u5316\u524D\u540E\u7684\u503C\uFF1B</li></ul></li></ul><p><code>\u4FA6\u542C\u7684\u6570\u636E\u6E90\u7C7B\u578B</code></p><ul><li><p><code>watch</code> \u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u53EF\u4EE5\u662F\u4E0D\u540C\u5F62\u5F0F\u7684\u201C\u6765\u6E90\u201D\uFF1A\u5B83\u53EF\u4EE5\u662F\u4E00\u4E2A ref (\u5305\u62EC\u8BA1\u7B97\u5C5E\u6027)\u3001\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u3001\u4E00\u4E2A getter \u51FD\u6570\u3001\u6216\u591A\u4E2A\u6765\u6E90\u7EC4\u6210\u7684\u6570\u7EC4\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">x</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">y</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u5355\u4E2A ref</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">newX</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`x is </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">newX</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// getter \u51FD\u6570</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">x</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">y</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">sum</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`sum of x + y is: </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">sum</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u591A\u4E2A\u6765\u6E90\u7EC4\u6210\u7684\u6570\u7EC4</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">([</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">y</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">], ([</span><span style="color:#E06C75;font-style:italic;">newX</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newY</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`x is </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">newX</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> and y is </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">newY</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//\u4FA6\u542C\u591A\u4E2A\u6570\u636E\u6E90</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">([() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({...</span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">}), </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">], ([</span><span style="color:#E06C75;font-style:italic;">newInfo</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newName</span><span style="color:#ABB2BF;">], [</span><span style="color:#E06C75;font-style:italic;">oldInfo</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldName</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newInfo</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">oldInfo</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">oldName</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u6CE8\u610F\uFF0C\u4E0D\u80FD\u4FA6\u542C\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684 property\uFF0C\u4F8B\u5982:</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u8FD9\u4E0D\u8D77\u4F5C\u7528\uFF0C\u56E0\u4E3A\u4F60\u5411 watch() \u4F20\u5165\u4E86\u4E00\u4E2A number</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">count</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`count is: </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre></div><p>\u800C\u662F\u7528 getter \u51FD\u6570\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// \u63D0\u4F9B\u4E00\u4E2A getter \u51FD\u6570</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">count</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`count is: </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="_13-5-6-watch\u6DF1\u5C42\u4FA6\u542C\u5668" tabindex="-1">13.5.6 Watch\u6DF1\u5C42\u4FA6\u542C\u5668 <a class="header-anchor" href="#_13-5-6-watch\u6DF1\u5C42\u4FA6\u542C\u5668" aria-hidden="true">#</a></h3><p>\u76F4\u63A5\u7ED9 <code>watch()</code> \u4F20\u5165\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u4F1A\u9690\u5F0F\u5730\u521B\u5EFA\u4E00\u4E2A\u6DF1\u5C42\u4FA6\u542C\u5668\u2014\u2014\u8BE5\u56DE\u8C03\u51FD\u6570\u5728\u6240\u6709\u5D4C\u5957\u7684\u53D8\u66F4\u65F6\u90FD\u4F1A\u88AB\u89E6\u53D1\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u5728\u5D4C\u5957\u7684 property \u53D8\u66F4\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u6CE8\u610F\uFF1A\`newValue\` \u6B64\u5904\u548C \`oldValue\` \u662F\u76F8\u7B49\u7684</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u56E0\u4E3A\u5B83\u4EEC\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF01</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E0D\u540C\u4E8E\u8FD4\u56DE\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684 getter \u51FD\u6570\uFF1A\u53EA\u6709\u5728 getter \u51FD\u6570\u8FD4\u56DE\u4E0D\u540C\u7684\u5BF9\u8C61\u65F6\uFF0C\u624D\u4F1A\u89E6\u53D1\u56DE\u8C03\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">someObject</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u4EC5\u5F53 state.someObject \u88AB\u66FF\u6362\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u91CC\uFF0C\u4F60\u53EF\u4EE5\u663E\u5F0F\u5730\u52A0\u4E0A <code>deep</code> \u9009\u9879\uFF0C\u5F3A\u5236\u8F6C\u6210\u6DF1\u5C42\u4FA6\u542C\u5668\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">someObject</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u6CE8\u610F\uFF1A\`newValue\` \u6B64\u5904\u548C \`oldValue\` \u662F\u76F8\u7B49\u7684</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// *\u9664\u975E* state.someObject \u88AB\u6574\u4E2A\u66FF\u6362\u4E86</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  { </span><span style="color:#E06C75;">deep</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">\u8C28\u614E\u4F7F\u7528</p><p>\u6DF1\u5EA6\u4FA6\u542C\u9700\u8981\u904D\u5386\u88AB\u4FA6\u542C\u5BF9\u8C61\u4E2D\u7684\u6240\u6709\u5D4C\u5957\u7684 property\uFF0C\u5F53\u7528\u4E8E\u5927\u578B\u6570\u636E\u7ED3\u6784\u65F6\uFF0C\u5F00\u9500\u5F88\u5927\u3002\u56E0\u6B64\u8BF7\u53EA\u5728\u5FC5\u8981\u65F6\u624D\u4F7F\u7528\u5B83\uFF0C\u5E76\u4E14\u8981\u7559\u610F\u6027\u80FD\u3002</p></div><h2 id="_13-6-setup\u7684\u751F\u547D\u5468\u671F" tabindex="-1">13.6 setup\u7684\u751F\u547D\u5468\u671F <a class="header-anchor" href="#_13-6-setup\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a></h2><p>setup \u53EF\u4EE5\u7528\u6765\u66FF\u4EE3 data \u3001 methods \u3001 computed \u3001watch \u7B49\u7B49\u8FD9\u4E9B\u9009\u9879\uFF0C\u4E5F\u53EF\u4EE5\u66FF\u4EE3 \u751F\u547D\u5468 \u671F\u94A9\u5B50</p><p><img src="`+p+`" alt="image-20220726173351155"></p><p><code>\u793A\u4F8B</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;{{</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">}}&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">onMounted</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onUpdated</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onUnmounted</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">onMounted</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;App Mounted1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">onMounted</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;App Mounted2&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">onUpdated</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;App onUpdated&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">onUnmounted</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;App onUnmounted&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u66F4\u8BE6\u7EC6\u7684\u89E3\u91CA\uFF0C\u8BF7\u770Bvue3\u6587\u6863\u7EC4\u5408\u5F0F API\uFF1A\u751F\u547D\u5468\u671F\u94A9\u5B50<a href="https://staging-cn.vuejs.org/api/composition-api-lifecycle.html#composition-api-lifecycle-hooks" target="_blank" rel="noopener noreferrer">\u94FE\u63A5</a></p><h2 id="_13-7-provide\u548Cinject" tabindex="-1">13.7 Provide\u548CInject <a class="header-anchor" href="#_13-7-provide\u548Cinject" aria-hidden="true">#</a></h2><h3 id="_13-7-1-provide\u51FD\u6570" tabindex="-1">13.7.1 provide\u51FD\u6570 <a class="header-anchor" href="#_13-7-1-provide\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u8981\u7ED9\u5B50\u7EC4\u4EF6\u63D0\u4F9B\u6570\u636E\uFF0C\u9700\u8981\u4F7F\u7528\u5230 <a href="https://staging-cn.vuejs.org/api/composition-api-dependency-injection.html#provide" target="_blank" rel="noopener noreferrer"><code>provide()</code></a> \u51FD\u6570\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">provide</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* \u6CE8\u5165\u540D */</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;message&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">/* \u503C */</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;hello!&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4E0D\u4F7F\u7528 <code>&lt;script setup&gt;</code>\uFF0C\u8BF7\u786E\u4FDD <code>provide()</code> \u662F\u5728 <code>setup()</code> \u540C\u6B65\u8C03\u7528\u7684\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">provide</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;code&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span></code></pre></div><p><code>provide()</code> \u51FD\u6570\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\u3002\u7B2C\u4E00\u4E2A\u53C2\u6570\u88AB\u79F0\u4E3A<strong>\u6CE8\u5165\u540D</strong>\uFF0C\u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u6216\u662F\u4E00\u4E2A <code>Symbol</code>\u3002\u540E\u4EE3\u7EC4\u4EF6\u4F1A\u7528\u6CE8\u5165\u540D\u6765\u67E5\u627E\u671F\u671B\u6CE8\u5165\u7684\u503C\u3002\u4E00\u4E2A\u7EC4\u4EF6\u53EF\u4EE5\u591A\u6B21\u8C03\u7528 <code>provide()</code>\uFF0C\u4F7F\u7528\u4E0D\u540C\u7684\u6CE8\u5165\u540D\uFF0C\u6CE8\u5165\u4E0D\u540C\u7684\u4F9D\u8D56\u503C\u3002</p><p>\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4F9B\u7ED9\u7684\u503C\uFF0C\u503C\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B\uFF0C\u5305\u62EC\u54CD\u5E94\u5F0F\u7684\u72B6\u6001\uFF0C\u6BD4\u5982\u4E00\u4E2A ref\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">provide</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;key&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-7-2-inject\u51FD\u6570" tabindex="-1">13.7.2 inject\u51FD\u6570 <a class="header-anchor" href="#_13-7-2-inject\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u8981\u6CE8\u5165\u7236\u7EC4\u4EF6\u63D0\u4F9B\u7684\u6570\u636E\uFF0C\u9700\u8981\u4F7F\u7528 <a href="https://staging-cn.vuejs.org/api/composition-api-dependency-injection.html#inject" target="_blank" rel="noopener noreferrer"><code>inject()</code></a> \u51FD\u6570\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">inject</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">message</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;message&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u6CA1\u6709\u4F7F\u7528 <code>&lt;script setup&gt;</code>\uFF0C<code>inject()</code> \u9700\u8981\u5728 <code>setup()</code> \u540C\u6B65\u8C03\u7528\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">inject</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">message</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;message&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>inject\u53EF\u4EE5\u4F20\u5165\u4E24\u4E2A\u53C2\u6570\uFF1A</p><ul><li>\u8981 inject \u7684 property \u7684 name\uFF1B</li><li>\u9ED8\u8BA4\u503C\uFF1B</li></ul><h3 id="_13-7-3-\u6570\u636E\u7684\u54CD\u5E94\u5F0F" tabindex="-1">13.7.3 \u6570\u636E\u7684\u54CD\u5E94\u5F0F <a class="header-anchor" href="#_13-7-3-\u6570\u636E\u7684\u54CD\u5E94\u5F0F" aria-hidden="true">#</a></h3><p>\u4E3A\u4E86\u589E\u52A0 provide \u503C\u548C inject \u503C\u4E4B\u95F4\u7684\u54CD\u5E94\u6027\uFF0C\u5728\u4F7F\u7528 provide \u503C\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ref \u548C reactive</p><p>\u5982\u679C\u63D0\u4F9B\u7684\u503C\u662F\u4E00\u4E2A ref\uFF0C\u6CE8\u5165\u8FDB\u6765\u7684\u5C31\u662F\u5B83\u672C\u8EAB\uFF0C\u800C<strong>\u4E0D\u4F1A</strong>\u81EA\u52A8\u89E3\u5305\u3002\u8FD9\u4F7F\u5F97\u88AB\u6CE8\u5165\u7684\u7EC4\u4EF6\u4FDD\u6301\u4E86\u548C\u4F9B\u7ED9\u8005\u7684\u54CD\u5E94\u6027\u94FE\u63A5\u3002</p><p>\u5982\u679C\u60F3\u4FDD\u8BC1\u4ECE <code>provide</code> \u4F20\u8FC7\u6765\u7684\u6570\u636E\u4E0D\u4F1A\u88AB <code>injector</code> \u7684\u7EC4\u4EF6\u66F4\u6539\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528<a href="https://staging-cn.vuejs.org/api/reactivity-core.html#readonly" target="_blank" rel="noopener noreferrer"><code>readonly()</code></a> \u6765\u5305\u88C5\u63D0\u4F9B\u7684\u503C\u3002</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">provide</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;read-only-count&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u6CA1\u6709\u4F7F\u7528 <code>&lt;script setup&gt;</code>\uFF0C \u9700\u8981\u5728 <code>setup()</code> \u540C\u6B65\u8C03\u7528\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">provide</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Home</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./Home.vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">components</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">Home</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;coderwhy&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">counter</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u53EF\u54CD\u5E94\u7684\u6570\u636E\uFF0C\u90A3\u4E48\u6700\u597D\u662F\u5728\u6570\u636E\u63D0\u4F9B\u7684\u4F4D\u7F6E\u6765\u4FEE\u6539\uFF1A</p><ul><li>\u6211\u4EEC\u53EF\u4EE5\u5C06\u4FEE\u6539\u65B9\u6CD5\u8FDB\u884C\u5171\u4EAB\uFF0C\u5728\u540E\u4EE3\u7EC4\u4EF6\u4E2D\u8FDB\u884C\u8C03\u7528\uFF1B</li></ul><blockquote><p>\u4FDD\u8BC1\u5728\u7EC4\u4EF6\u95F4\u7684\u5355\u5411\u6570\u636E\u6D41</p></blockquote><h2 id="_13-8-\u6E32\u67D3\u51FD\u6570-jsx" tabindex="-1">13.8 \u6E32\u67D3\u51FD\u6570 &amp; JSX <a class="header-anchor" href="#_13-8-\u6E32\u67D3\u51FD\u6570-jsx" aria-hidden="true">#</a></h2><p>\u5728\u7EDD\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0CVue \u63A8\u8350\u4F7F\u7528\u6A21\u677F\u8BED\u6CD5\u6765\u642D\u5EFA HTML\u3002\u7136\u800C\u5728\u67D0\u4E9B\u4F7F\u7528\u573A\u666F\u4E0B\uFF0C\u6211\u4EEC\u771F\u7684\u9700\u8981\u7528\u5230 JavaScript \u5B8C\u5168\u7684\u7F16\u7A0B\u80FD\u529B\u3002\u53EF\u4EE5\u4F7F\u7528<strong>\u6E32\u67D3\u51FD\u6570</strong>\u3002</p><ul><li>Vue\u5728\u751F\u6210\u771F\u5B9E\u7684DOM\u4E4B\u524D\uFF0C\u4F1A\u5C06\u6211\u4EEC\u7684\u8282\u70B9\u8F6C\u6362\u6210VNode\uFF0C\u800CVNode\u7EC4\u5408\u5728\u4E00\u8D77\u5F62\u6210\u4E00\u9897\u6811\u7ED3\u6784\uFF0C\u5C31\u662F\u865A \u62DFDOM\uFF08VDOM\uFF09\uFF1B</li><li>\u4E8B\u5B9E\u4E0A\uFF0C\u6211\u4EEC\u4E4B\u524D\u7F16\u5199\u7684 template \u4E2D\u7684HTML \u6700\u7EC8\u4E5F\u662F\u4F7F\u7528\u6E32\u67D3\u51FD\u6570\u751F\u6210\u5BF9\u5E94\u7684VNode\uFF1B</li><li>\u90A3\u4E48\uFF0C\u5982\u679C\u4F60\u5145\u5206\u7684\u5229\u7528JavaScript\u7684\u7F16\u7A0B\u80FD\u529B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u6765\u7F16\u5199 createVNode \u51FD\u6570\uFF0C\u751F\u6210\u5BF9\u5E94\u7684 VNode\uFF1B</li><li>\u4F7F\u7528 h()\u51FD\u6570\uFF1A <ul><li>h() \u51FD\u6570\u662F\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA vnode \u7684\u4E00\u4E2A\u51FD\u6570\uFF1B</li><li>\u5176\u5B9E\u66F4\u51C6\u5907\u7684\u547D\u540D\u662F createVNode() \u51FD\u6570\uFF0C\u4F46\u662F\u4E3A\u4E86\u7B80\u4FBF\u5728Vue\u5C06\u4E4B\u7B80\u5316\u4E3A h() \u51FD\u6570\uFF1B</li></ul></li></ul><h3 id="_13-8-1-\u57FA\u672C\u7528\u6CD5" tabindex="-1">13.8.1 \u57FA\u672C\u7528\u6CD5 <a class="header-anchor" href="#_13-8-1-\u57FA\u672C\u7528\u6CD5" aria-hidden="true">#</a></h3><p>Vue \u63D0\u4F9B\u4E86\u4E00\u4E2A <code>h()</code> \u51FD\u6570\u7528\u4E8E\u521B\u5EFA vnodes\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// type</span></span>
<span class="line"><span style="color:#ABB2BF;">  { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;bar&#39;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#7F848E;font-style:italic;">// props</span></span>
<span class="line"><span style="color:#ABB2BF;">  [</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">/* children */</span></span>
<span class="line"><span style="color:#ABB2BF;">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre></div><p><code>h()</code> \u662F <strong>hyperscript</strong> \u7684\u7B80\u79F0\u2014\u2014\u610F\u601D\u662F\u201C\u80FD\u751F\u6210 HTML (\u8D85\u6587\u672C\u6807\u8BB0\u8BED\u8A00) \u7684 JavaScript\u201D\u3002\u8FD9\u4E2A\u540D\u5B57\u6765\u6E90\u4E8E\u8BB8\u591A\u865A\u62DF DOM \u5B9E\u73B0\u65F6\u5171\u4EAB\u7684\u7EA6\u5B9A\u3002\u4E00\u4E2A\u66F4\u51C6\u786E\u7684\u540D\u79F0\u5E94\u8BE5\u662F <code>createVnode()</code>\uFF0C\u4F46\u5F53\u4F60\u9700\u8981\u591A\u6B21\u4F7F\u7528\u6E32\u67D3\u51FD\u6570\u65F6\uFF0C\u4E00\u4E2A\u7B80\u77ED\u7684\u540D\u5B57\u80FD\u66F4\u597D\u5730\u5E2E\u5230\u4F60\u3002</p><p>\u6CE8\u610F\u4E8B\u9879\uFF1A</p><ul><li>\u5982\u679C\u6CA1\u6709props\uFF0C\u90A3\u4E48\u901A\u5E38\u53EF\u4EE5\u5C06children\u4F5C\u4E3A\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u5165\uFF1B</li><li>\u5982\u679C\u4F1A\u4EA7\u751F\u6B67\u4E49\uFF0C\u53EF\u4EE5\u5C06null\u4F5C\u4E3A\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u5165\uFF0C\u5C06children\u4F5C\u4E3A\u7B2C\u4E09\u4E2A\u53C2\u6570\u4F20\u5165\uFF1B</li></ul><p><code>h()</code> \u51FD\u6570\u7684\u4F7F\u7528\u65B9\u5F0F\u975E\u5E38\u7684\u7075\u6D3B\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// \u9664\u4E86\u7C7B\u578B\u5FC5\u586B\u4EE5\u5916\uFF0C\u5176\u4ED6\u7684\u53C2\u6570\u90FD\u662F\u53EF\u9009\u7684</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// attribute \u548C property \u90FD\u80FD\u5728 prop \u4E2D\u4E66\u5199</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Vue \u4F1A\u81EA\u52A8\u5C06\u5B83\u4EEC\u5206\u914D\u5230\u6B63\u786E\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;bar&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">innerHTML</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// props modifiers such as .prop and .attr can be added</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// with &#39;.&#39; and \`^&#39; prefixes respectively</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#98C379;">&#39;.name&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;some-name&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;^width&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;100&#39;</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u7C7B\u4E0E\u6837\u5F0F\u53EF\u4EE5\u50CF\u5728\u6A21\u677F\u4E2D\u4E00\u6837</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u7528\u6570\u7EC4\u6216\u5BF9\u8C61\u7684\u5F62\u5F0F\u4E66\u5199</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: [</span><span style="color:#E06C75;">foo</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;"> }], </span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;red&#39;</span><span style="color:#ABB2BF;"> } })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u4E8B\u4EF6\u76D1\u542C\u5668\u5E94\u4EE5 onXxx \u7684\u5F62\u5F0F\u4E66\u5199</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {} })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// children \u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u6CA1\u6709 props \u65F6\u53EF\u4EE5\u7701\u7565\u4E0D\u5199</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, [</span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;span&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">)])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// children \u6570\u7EC4\u53EF\u4EE5\u540C\u65F6\u5305\u542B vnodes \u4E0E\u5B57\u7B26\u4E32</span></span>
<span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, [</span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;span&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">)])</span></span>
<span class="line"></span></code></pre></div><p>\u5F97\u5230\u7684 vnode \u4E3A\u5982\u4E0B\u5F62\u5F0F\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;"> }, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// &#39;div&#39;</span></span>
<span class="line"><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// { id: &#39;foo&#39; }</span></span>
<span class="line"><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// []</span></span>
<span class="line"><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// null</span></span>
<span class="line"></span></code></pre></div><ul><li><p>h\u51FD\u6570\u53EF\u4EE5\u5728\u4E24\u4E2A\u5730\u65B9\u4F7F\u7528\uFF1A</p><ul><li><p>render\u51FD\u6570\u9009\u9879\u4E2D\uFF1B</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;h2&quot;</span><span style="color:#ABB2BF;">, {</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">}, </span><span style="color:#98C379;">&quot;Hello Render&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span></code></pre></div></li><li><p>setup\u51FD\u6570\u9009\u9879\u4E2D\uFF08setup\u672C\u8EAB\u9700\u8981\u662F\u4E00\u4E2A\u51FD\u6570\u7C7B\u578B\uFF0C\u51FD\u6570\u518D\u8FD4\u56DEh\u51FD\u6570\u521B\u5EFA\u7684VNode\uFF09</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;h2&quot;</span><span style="color:#ABB2BF;">, {</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">}, </span><span style="color:#98C379;">&quot;Hello Render&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span></code></pre></div></li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u7EC4\u4EF6\u6811\u4E2D\u7684 vnodes \u5FC5\u987B\u662F\u552F\u4E00\u7684</p></div><h3 id="_13-8-2-\u6E32\u67D3\u63D2\u69FD" tabindex="-1">13.8.2 \u6E32\u67D3\u63D2\u69FD<a href="https://staging-cn.vuejs.org/guide/extras/render-function.html#rendering-slots" target="_blank" rel="noopener noreferrer">#</a> <a class="header-anchor" href="#_13-8-2-\u6E32\u67D3\u63D2\u69FD" aria-hidden="true">#</a></h3><p>\u5728\u6E32\u67D3\u51FD\u6570\u4E2D\uFF0C\u63D2\u69FD\u53EF\u4EE5\u901A\u8FC7 <code>setup()</code> \u7684\u4E0A\u4E0B\u6587\u6765\u8BBF\u95EE\u3002\u6BCF\u4E2A <code>slots</code> \u5BF9\u8C61\u4E2D\u7684\u63D2\u69FD\u90FD\u662F\u4E00\u4E2A<strong>\u8FD4\u56DE vnodes \u6570\u7EC4\u7684\u51FD\u6570</strong>\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;message&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;font-style:italic;">slots</span><span style="color:#ABB2BF;"> }) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u9ED8\u8BA4\u63D2\u69FD\uFF1A</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// &lt;div&gt;&lt;slot /&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">slots</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u5177\u540D\u63D2\u69FD\uFF1A</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// &lt;div&gt;&lt;slot name=&quot;footer&quot; :text=&quot;message&quot; /&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">slots</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">footer</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      )</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7B49\u4EF7 JSX \u8BED\u6CD5\uFF1A</p><div class="language-jsx"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// \u9ED8\u8BA4\u63D2\u69FD</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">slots</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u5177\u540D\u63D2\u69FD</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">slots</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">footer</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;"> })</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-8-3-jsx\u7684\u4F7F\u7528" tabindex="-1">13.8.3 jsx\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-8-3-jsx\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u6211\u4EEC\u5E0C\u671B\u5728\u9879\u76EE\u4E2D\u4F7F\u7528jsx\uFF0C\u90A3\u4E48\u6211\u4EEC\u9700\u8981\u6DFB\u52A0\u5BF9jsx\u7684\u652F\u6301\uFF1A</p><ul><li><p>jsx\u6211\u4EEC\u901A\u5E38\u4F1A\u901A\u8FC7Babel\u6765\u8FDB\u884C\u8F6C\u6362\uFF08React\u7F16\u5199\u7684jsx\u5C31\u662F\u901A\u8FC7babel\u8F6C\u6362\u7684\uFF09\uFF1B</p></li><li><p>\u5BF9\u4E8EVue\u6765\u8BF4\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5728Babel\u4E2D\u914D\u7F6E\u5BF9\u5E94\u7684\u63D2\u4EF6\u5373\u53EF\uFF1B</p></li></ul></li><li><p>\u5B89\u88C5Babel\u652F\u6301Vue\u7684jsx\u63D2\u4EF6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">npm install @vue/babel-plugin-jsx -D</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u5728babel.config.js\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\u63D2\u4EF6\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">presets</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;@vue/cli-plugin-babel/preset&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">plugins</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;@vue/babel-plugin-jsx&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>\u8BA1\u6570\u5668\u793A\u4F8B\uFF1A</code></p><div class="language-jsx"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      return {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    render() </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">decrement</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;\u5F53\u524D\u8BA1\u6570: </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">increment</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;+1&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">decrement</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;-1&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      )</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="_13-8-4-jsx\u7EC4\u4EF6\u7684\u4F7F\u7528" tabindex="-1">13.8.4 jsx\u7EC4\u4EF6\u7684\u4F7F\u7528 <a class="header-anchor" href="#_13-8-4-jsx\u7EC4\u4EF6\u7684\u4F7F\u7528" aria-hidden="true">#</a></h3><p><code>App.vue</code></p><div class="language-jsx"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  import HelloWorld from &#39;./HelloWorld.vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;font-style:italic;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;font-style:italic;">HelloWorld</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">              {{</span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;}}</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;/</span><span style="color:#E06C75;font-style:italic;">HelloWorld</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;font-style:italic;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      )</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>HelloWorld.vue</code></p><div class="language-jsx"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;font-style:italic;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;font-style:italic;">h2</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;font-style:italic;">HelloWorld</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;font-style:italic;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span><span style="color:#E06C75;font-style:italic;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;font-style:italic;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;font-style:italic;">default</span><span style="color:#ABB2BF;"> ? </span><span style="color:#E06C75;font-style:italic;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;font-style:italic;">$slots</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;font-style:italic;">default</span><span style="color:#ABB2BF;">(): &lt;</span><span style="color:#E06C75;font-style:italic;">span</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;font-style:italic;">\u54C8\u54C8\u54C8</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;font-style:italic;">span</span><span style="color:#ABB2BF;">&gt;}</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;font-style:italic;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      )</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-9-\u7EC4\u5408\u5F0F\u51FD\u6570-\u7C7B\u4F3Creact-hook" tabindex="-1">13.9 \u7EC4\u5408\u5F0F\u51FD\u6570(\u7C7B\u4F3Creact hook) <a class="header-anchor" href="#_13-9-\u7EC4\u5408\u5F0F\u51FD\u6570-\u7C7B\u4F3Creact-hook" aria-hidden="true">#</a></h2><p>\u5728 Vue \u5E94\u7528\u7684\u6982\u5FF5\u4E2D\uFF0C\u201C\u7EC4\u5408\u5F0F\u51FD\u6570\u201D\u662F\u4E00\u4E2A\u5229\u7528 Vue \u7EC4\u5408\u5F0F API \u6765\u5C01\u88C5\u548C\u590D\u7528<strong>\u6709\u72B6\u6001\u903B\u8F91</strong>\u7684\u51FD\u6570\u3002</p><p>\u5F53\u6784\u5EFA\u524D\u7AEF\u5E94\u7528\u65F6\uFF0C\u6211\u4EEC\u5E38\u5E38\u9700\u8981\u590D\u7528\u516C\u5171\u4EFB\u52A1\u7684\u903B\u8F91\u3002\u4F8B\u5982\u4E3A\u4E86\u5728\u4E0D\u540C\u5730\u65B9\u683C\u5F0F\u5316\u65F6\u95F4\u800C\u62BD\u53D6\u4E00\u4E2A\u53EF\u590D\u7528\u7684\u51FD\u6570\u3002\u8FD9\u4E2A\u683C\u5F0F\u5316\u51FD\u6570\u5C01\u88C5\u4E86<strong>\u65E0\u72B6\u6001\u7684\u903B\u8F91</strong>\uFF1A\u5B83\u5728\u63A5\u6536\u4E00\u4E9B\u8F93\u5165\u540E\u7ACB\u523B\u8FD4\u56DE\u6240\u671F\u671B\u7684\u8F93\u51FA\u3002\u590D\u7528\u65E0\u72B6\u6001\u903B\u8F91\u7684\u5E93\u6709\u5F88\u591A\uFF0C\u8BF8\u5982\u4F60\u53EF\u80FD\u542C\u5230\u8FC7\u7684 <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">lodash</a> \u548C <a href="https://date-fns.org/" target="_blank" rel="noopener noreferrer">date-fns</a>\u3002</p><p>\u76F8\u6BD4\u4E4B\u4E0B\uFF0C\u6709\u72B6\u6001\u903B\u8F91\u8D1F\u8D23\u7BA1\u7406\u4F1A\u968F\u65F6\u95F4\u800C\u53D8\u5316\u7684\u72B6\u6001\u3002\u4E00\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\u662F\u8DDF\u8E2A\u5F53\u524D\u9F20\u6807\u5728\u9875\u9762\u4E2D\u7684\u4F4D\u7F6E\u3002\u5728\u771F\u5B9E\u5E94\u7528\u4E2D\uFF0C\u5B83\u4E5F\u53EF\u4EE5\u662F\u50CF\u89E6\u6478\u624B\u52BF\u6216\u4E0E\u6570\u636E\u5E93\u7684\u8FDE\u63A5\u72B6\u6001\u8FD9\u6837\u7684\u66F4\u590D\u6742\u7684\u903B\u8F91\u3002</p><p><code>\u5E94\u7528\uFF1A</code></p><p>\u6765\u5B8C\u6210\u4E00\u4E2A\u76D1\u542C\u754C\u9762\u6EDA\u52A8\u4F4D\u7F6E\u7684Hook\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">scrollX</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">scrollY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;scroll&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">scrollX</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollX</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">scrollY</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollY</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">scrollX</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">scrollY</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>\u5B8C\u6210\u4E00\u4E2A\u76D1\u542C\u9F20\u6807\u4F4D\u7F6E\u7684Hook:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">mouseX</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">mouseY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;mousemove&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">mouseX</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageX</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">mouseY</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageY</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">mouseX</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">mouseY</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>\u5B8C\u6210\u4E00\u4E2A\u4F7F\u7528 localStorage \u5B58\u50A8\u548C\u83B7\u53D6\u6570\u636E\u7684Hook\uFF1A:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>App.vue\u4E2D\u4F7F\u7528</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#FFFFFF;">@click=&quot;changeData&quot;&gt;\u4FEE\u6539data&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#FFFFFF;">&lt;p</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;content&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scroll&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scroll-x&quot;</span><span style="color:#ABB2BF;">&gt;scrollX: </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">scrollX</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scroll-y&quot;</span><span style="color:#ABB2BF;">&gt;scrollY: </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">scrollY</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;mouse&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;mouse-x&quot;</span><span style="color:#ABB2BF;">&gt;mouseX: </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">mouseX</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;mouse-y&quot;</span><span style="color:#ABB2BF;">&gt;mouseY: </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">mouseY</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  import </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> from &#39;vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  import </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">useLocalStorage</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">useMousePosition</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">useScrollPosition</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> from &#39;./hooks&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u6EDA\u52A8\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#ABB2BF;">      const { </span><span style="color:#E06C75;">scrollX</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">scrollY</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useScrollPosition</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u9F20\u6807\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">mouseX</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">mouseY</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useMousePosition</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// localStorage</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useLocalStorage</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;info&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">changeData</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;\u54C8\u54C8\u54C8\u54C8&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">scrollX</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">scrollY</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mouseX</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mouseY</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">changeData</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-10-\u81EA\u5B9A\u4E49\u6307\u4EE4" tabindex="-1">13.10 \u81EA\u5B9A\u4E49\u6307\u4EE4 <a class="header-anchor" href="#_13-10-\u81EA\u5B9A\u4E49\u6307\u4EE4" aria-hidden="true">#</a></h2><ul><li><p>Vue \u5141\u8BB8\u6211\u4EEC\u6765\u81EA\u5B9A\u4E49\u81EA\u5DF1\u7684\u6307\u4EE4\u3002</p></li><li><p>\u6CE8\u610F\uFF1A\u5728Vue\u4E2D\uFF0C\u4EE3\u7801\u7684\u590D\u7528\u548C\u62BD\u8C61\u4E3B\u8981\u8FD8\u662F\u901A\u8FC7\u7EC4\u4EF6\uFF1B</p></li><li><p>\u901A\u5E38\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u4F60\u9700\u8981\u5BF9DOM\u5143\u7D20\u8FDB\u884C\u5E95\u5C42\u64CD\u4F5C\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u4F1A\u7528\u5230<code>\u81EA\u5B9A\u4E49\u6307\u4EE4</code>\uFF1B</p></li><li><p>\u81EA\u5B9A\u4E49\u6307\u4EE4\u5206\u4E3A\u4E24\u79CD\uFF1A</p><ul><li>\u81EA\u5B9A\u4E49\u5C40\u90E8\u6307\u4EE4\uFF1A\u7EC4\u4EF6\u4E2D\u901A\u8FC7 <code>directives</code> \u9009\u9879\uFF0C\u53EA\u80FD\u5728\u5F53\u524D\u7EC4\u4EF6\u4E2D\u4F7F\u7528\uFF1B</li><li>\u81EA\u5B9A\u4E49\u5168\u5C40\u6307\u4EE4\uFF1Aapp\u7684 <code>directive</code> \u65B9\u6CD5\uFF0C\u53EF\u4EE5\u5728\u4EFB\u610F\u7EC4\u4EF6\u4E2D\u88AB\u4F7F\u7528\uFF1B</li></ul></li><li><p>\u6BD4\u5982\u6211\u4EEC\u6765\u505A\u4E00\u4E2A\u975E\u5E38\u7B80\u5355\u7684\u6848\u4F8B\uFF1A\u5F53\u67D0\u4E2A\u5143\u7D20\u6302\u8F7D\u5B8C\u6210\u540E\u53EF\u4EE5\u81EA\u5B9A\u83B7\u53D6\u7126\u70B9</p><ul><li><p>\u5B9E\u73B0\u65B9\u5F0F\u4E00\uFF1A\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u9ED8\u8BA4\u7684\u5B9E\u73B0\u65B9\u5F0F\uFF1B</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;input&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onMounted</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">onMounted</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">focus</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">input</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u5B9E\u73B0\u65B9\u5F0F\u4E8C\uFF1A\u81EA\u5B9A\u4E49\u4E00\u4E2A v-focus \u7684\u5C40\u90E8\u6307\u4EE4\uFF1B</p></li><li><p>\u5B83\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5728\u5BF9\u8C61\u4E2D\u7F16\u5199\u6211\u4EEC\u81EA\u5B9A\u4E49\u6307\u4EE4\u7684\u540D\u79F0\uFF08\u6CE8\u610F\uFF1A\u8FD9\u91CC\u4E0D\u9700\u8981\u52A0v-\uFF09\uFF1B</p></li><li><p>\u81EA\u5B9A\u4E49\u6307\u4EE4\u6709\u4E00\u4E2A\u751F\u547D\u5468\u671F\uFF0C\u662F\u5728\u7EC4\u4EF6\u6302\u8F7D\u540E\u8C03\u7528\u7684 mounted\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5176\u4E2D\u5B8C\u6210\u64CD\u4F5C\uFF1B</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-focus</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u5C40\u90E8\u6307\u4EE4</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">directives</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">focus</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">mounted</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">bindings</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">vnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">preVnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;focus mounted&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">focus</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>setup\u9876\u5C42\u5199\u6CD5</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// \u5728\u6A21\u677F\u4E2D\u542F\u7528 v-focus</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">vFocus</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">mounted</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">focus</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-focus</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u5B9E\u73B0\u65B9\u5F0F\u4E09\uFF1A\u81EA\u5B9A\u4E49\u4E00\u4E2A v-focus \u7684\u5168\u5C40\u6307\u4EE4\uFF1B</p></li><li><p>\u81EA\u5B9A\u4E49\u4E00\u4E2A\u5168\u5C40\u7684v-focus\u6307\u4EE4\u53EF\u4EE5\u8BA9\u6211\u4EEC\u5728\u4EFB\u4F55\u5730\u65B9\u76F4\u63A5\u4F7F\u7528</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">directive</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;focus&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">mounted</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">focus</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"></span></code></pre></div></li></ul></li></ul><h3 id="_13-10-1\u6307\u4EE4\u7684\u751F\u547D\u5468\u671F" tabindex="-1">13.10.1\u6307\u4EE4\u7684\u751F\u547D\u5468\u671F <a class="header-anchor" href="#_13-10-1\u6307\u4EE4\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a></h3><ul><li>\u4E00\u4E2A\u6307\u4EE4\u5B9A\u4E49\u7684\u5BF9\u8C61\uFF0CVue\u63D0\u4F9B\u4E86\u5982\u4E0B\u7684\u51E0\u4E2A\u94A9\u5B50\u51FD\u6570\uFF1A</li><li><code>created</code>\uFF1A\u5728\u7ED1\u5B9A\u5143\u7D20\u7684 attribute \u6216\u4E8B\u4EF6\u76D1\u542C\u5668\u88AB\u5E94\u7528\u4E4B\u524D\u8C03\u7528\uFF1B</li><li><code>beforeMount</code>\uFF1A\u5F53\u6307\u4EE4\u7B2C\u4E00\u6B21\u7ED1\u5B9A\u5230\u5143\u7D20\u5E76\u4E14\u5728\u6302\u8F7D\u7236\u7EC4\u4EF6\u4E4B\u524D\u8C03\u7528\uFF1B</li><li><code>mounted</code>\uFF1A\u5728\u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6\u88AB\u6302\u8F7D\u540E\u8C03\u7528\uFF1B</li><li><code>beforeUpdate</code>\uFF1A\u5728\u66F4\u65B0\u5305\u542B\u7EC4\u4EF6\u7684 VNode \u4E4B\u524D\u8C03\u7528\uFF1B</li><li><code>updated</code>\uFF1A\u5728\u5305\u542B\u7EC4\u4EF6\u7684 VNode \u53CA\u5176\u5B50\u7EC4\u4EF6\u7684 VNode \u66F4\u65B0\u540E\u8C03\u7528\uFF1B</li><li><code>beforeUnmount</code>\uFF1A\u5728\u5378\u8F7D\u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6\u4E4B\u524D\u8C03\u7528\uFF1B</li><li><code>unmounted</code>\uFF1A\u5F53\u6307\u4EE4\u4E0E\u5143\u7D20\u89E3\u9664\u7ED1\u5B9A\u4E14\u7236\u7EC4\u4EF6\u5DF2\u5378\u8F7D\u65F6\uFF0C\u53EA\u8C03\u7528\u4E00\u6B21\uFF1B</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">myDirective</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u5728\u7ED1\u5B9A\u5143\u7D20\u7684 attribute \u524D</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u6216\u4E8B\u4EF6\u76D1\u542C\u5668\u5E94\u7528\u524D\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">created</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">binding</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">vnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">prevVnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u4E0B\u9762\u4F1A\u4ECB\u7ECD\u5404\u4E2A\u53C2\u6570\u7684\u7EC6\u8282</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u5728\u5143\u7D20\u88AB\u63D2\u5165\u5230 DOM \u524D\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeMount</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u5728\u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u53CA\u4ED6\u81EA\u5DF1\u7684\u6240\u6709\u5B50\u8282\u70B9\u90FD\u6302\u8F7D\u5B8C\u6210\u540E\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">mounted</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6\u66F4\u65B0\u524D\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeUpdate</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u5728\u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u53CA\u4ED6\u81EA\u5DF1\u7684\u6240\u6709\u5B50\u8282\u70B9\u90FD\u66F4\u65B0\u540E\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">updated</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6\u5378\u8F7D\u524D\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeUnmount</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// \u7ED1\u5B9A\u5143\u7D20\u7684\u7236\u7EC4\u4EF6\u5378\u8F7D\u540E\u8C03\u7528</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">unmounted</span><span style="color:#ABB2BF;">() {}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-10-2-\u6307\u4EE4\u7684\u53C2\u6570\u548C\u4FEE\u9970\u7B26" tabindex="-1">13.10.2 \u6307\u4EE4\u7684\u53C2\u6570\u548C\u4FEE\u9970\u7B26 <a class="header-anchor" href="#_13-10-2-\u6307\u4EE4\u7684\u53C2\u6570\u548C\u4FEE\u9970\u7B26" aria-hidden="true">#</a></h3><ul><li><p><code>el</code>\uFF1A\u6307\u4EE4\u7ED1\u5B9A\u5230\u7684\u5143\u7D20\u3002\u8FD9\u53EF\u4EE5\u7528\u4E8E\u76F4\u63A5\u64CD\u4F5C DOM\u3002</p></li><li><p><code>binding</code>\uFF1A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5305\u542B\u4EE5\u4E0B property\u3002</p><ul><li><code>value</code>\uFF1A\u4F20\u9012\u7ED9\u6307\u4EE4\u7684\u503C\u3002\u4F8B\u5982\u5728 <code>v-my-directive=&quot;1 + 1&quot;</code> \u4E2D\uFF0C\u503C\u662F <code>2</code>\u3002</li><li><code>oldValue</code>\uFF1A\u4E4B\u524D\u7684\u503C\uFF0C\u4EC5\u5728 <code>beforeUpdate</code> \u548C <code>updated</code> \u4E2D\u53EF\u7528\u3002\u65E0\u8BBA\u503C\u662F\u5426\u66F4\u6539\uFF0C\u5B83\u90FD\u53EF\u7528\u3002</li><li><code>arg</code>\uFF1A\u4F20\u9012\u7ED9\u6307\u4EE4\u7684\u53C2\u6570 (\u5982\u679C\u6709\u7684\u8BDD)\u3002\u4F8B\u5982\u5728 <code>v-my-directive:foo</code> \u4E2D\uFF0C\u53C2\u6570\u662F <code>&quot;foo&quot;</code>\u3002</li><li><code>modifiers</code>\uFF1A\u4E00\u4E2A\u5305\u542B\u4FEE\u9970\u7B26\u7684\u5BF9\u8C61 (\u5982\u679C\u6709\u7684\u8BDD)\u3002\u4F8B\u5982\u5728 <code>v-my-directive.foo.bar</code> \u4E2D\uFF0C\u4FEE\u9970\u7B26\u5BF9\u8C61\u662F <code>{ foo: true, bar: true }</code>\u3002</li><li><code>instance</code>\uFF1A\u4F7F\u7528\u8BE5\u6307\u4EE4\u7684\u7EC4\u4EF6\u5B9E\u4F8B\u3002</li><li><code>dir</code>\uFF1A\u6307\u4EE4\u7684\u5B9A\u4E49\u5BF9\u8C61\u3002</li></ul></li><li><p><code>vnode</code>\uFF1A\u4EE3\u8868\u7ED1\u5B9A\u5143\u7D20\u7684\u5E95\u5C42 VNode\u3002</p></li><li><p><code>prevNode</code>\uFF1A\u4E4B\u524D\u7684\u6E32\u67D3\u4E2D\u4EE3\u8868\u6307\u4EE4\u6240\u7ED1\u5B9A\u5143\u7D20\u7684 VNode\u3002\u4EC5\u5728 <code>beforeUpdate</code> \u548C <code>updated</code> \u94A9\u5B50\u4E2D\u53EF\u7528\u3002</p></li><li><p>\u5728\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 bindings \u83B7\u53D6\u5230\u5BF9\u5E94\u7684\u5185\u5BB9\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;button v-f:info.aaa.bbb=&quot;{name:text}&quot;&gt;{{counter}}&lt;/button&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u8BE6\u7EC6\u81EA\u5B9A\u4E49\u6307\u4EE4\uFF0C\u8BF7\u53C2\u8003vue\u5B98\u65B9\u6587\u6863 <a href="https://staging-cn.vuejs.org/guide/reusability/custom-directives.html" target="_blank" rel="noopener noreferrer">\u94FE\u63A5</a></p></div><p><code>\u793A\u4F8B-\u5B9E\u73B0\u65F6\u95F4\u683C\u5F0F\u5316\u6307\u4EE4</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">dayjs</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;dayjs&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">directive</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;format-time&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">created</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">bindings</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">bindings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">formatString</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">bindings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">bindings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">formatString</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">bindings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">mounted</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">bindings</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">textContent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">timestamp</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">textContent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">timestamp</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">timestamp</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1000</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">el</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dayjs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timestamp</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">format</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">bindings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">formatString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-11-\u5185\u7F6E\u7EC4\u4EF6teleport" tabindex="-1">13.11 \u5185\u7F6E\u7EC4\u4EF6Teleport <a class="header-anchor" href="#_13-11-\u5185\u7F6E\u7EC4\u4EF6teleport" aria-hidden="true">#</a></h2><h3 id="_13-11-1-\u4EC0\u4E48\u662Fteleport\uFF1F" tabindex="-1">13.11.1 \u4EC0\u4E48\u662FTeleport\uFF1F <a class="header-anchor" href="#_13-11-1-\u4EC0\u4E48\u662Fteleport\uFF1F" aria-hidden="true">#</a></h3><ul><li><p>\u5728\u7EC4\u4EF6\u5316\u5F00\u53D1\u4E2D\uFF0C\u6211\u4EEC\u5C01\u88C5\u4E00\u4E2A\u7EC4\u4EF6A\uFF0C\u5728\u53E6\u5916\u4E00\u4E2A\u7EC4\u4EF6B\u4E2D\u4F7F\u7528\uFF1A</p><ul><li><p>\u90A3\u4E48\u7EC4\u4EF6A\u4E2Dtemplate\u7684\u5143\u7D20\uFF0C\u4F1A\u88AB\u6302\u8F7D\u5230\u7EC4\u4EF6B\u4E2Dtemplate\u7684\u67D0\u4E2A\u4F4D\u7F6E\uFF1B</p></li><li><p>\u6700\u7EC8\u6211\u4EEC\u7684\u5E94\u7528\u7A0B\u5E8F\u4F1A\u5F62\u6210\u4E00\u9897DOM\u6811\u7ED3\u6784\uFF1B</p></li></ul></li><li><p>\u4F46\u662F\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5E0C\u671B\u7EC4\u4EF6\u4E0D\u662F\u6302\u8F7D\u5728\u8FD9\u4E2A\u7EC4\u4EF6\u6811\u4E0A\u7684\uFF0C\u53EF\u80FD\u662F\u79FB\u52A8\u5230Vue app\u4E4B\u5916\u7684\u5176\u4ED6\u4F4D\u7F6E\uFF1A</p><ul><li><p>\u6BD4\u5982\u79FB\u52A8\u5230body\u5143\u7D20\u4E0A\uFF0C\u6216\u8005\u6211\u4EEC\u6709\u5176\u4ED6\u7684div#app\u4E4B\u5916\u7684\u5143\u7D20\u4E0A\uFF1B</p></li><li><p>\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7teleport\u6765\u5B8C\u6210\uFF1B</p></li></ul></li><li><p>Teleport\u662F\u4EC0\u4E48\u5462\uFF1F</p><ul><li><p>\u5B83\u662F\u4E00\u4E2AVue\u63D0\u4F9B\u7684\u5185\u7F6E\u7EC4\u4EF6\uFF0C\u7C7B\u4F3C\u4E8Ereact\u7684Portals\uFF1B</p></li><li><p>teleport\u7FFB\u8BD1\u8FC7\u6765\u662F\u5FC3\u7075\u4F20\u8F93\u3001\u8FDC\u8DDD\u79BB\u8FD0\u8F93\u7684\u610F\u601D\uFF1B</p></li></ul></li><li><p>\u5B83\u6709\u4E24\u4E2A\u5C5E\u6027\uFF1A</p><ul><li><p>to\uFF1A\u6307\u5B9A\u5C06\u5176\u4E2D\u7684\u5185\u5BB9\u79FB\u52A8\u5230\u7684\u76EE\u6807\u5143\u7D20\uFF0C\u53EF\u4EE5\u4F7F\u7528\u9009\u62E9\u5668\uFF1B</p></li><li><p>disabled\uFF1A\u662F\u5426\u7981\u7528 teleport \u7684\u529F\u80FD\uFF1B</p></li></ul></li></ul><p><code>modal-button</code> \u7684\u5B9E\u73B0</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">open</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">open</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;Open Modal&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">open</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;modal&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;Hello from the modal!&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">open</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;Close&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#D19A66;">.modal</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  position: </span><span style="color:#D19A66;">fixed</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  z-index: </span><span style="color:#D19A66;">999</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  top: </span><span style="color:#D19A66;">20</span><span style="color:#E06C75;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  left: </span><span style="color:#D19A66;">50</span><span style="color:#E06C75;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  width: </span><span style="color:#D19A66;">300</span><span style="color:#E06C75;">px</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  margin-left: </span><span style="color:#D19A66;">-150</span><span style="color:#E06C75;">px</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>Teleport</code>\u51CF\u5C11\u4EE3\u7801</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;button @click=&quot;open = true&quot;&gt;Open Modal&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Teleport to=&quot;body&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;div v-if=&quot;open&quot; class=&quot;modal&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;p&gt;Hello from the modal!&lt;/p&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;button @click=&quot;open = false&quot;&gt;Close&lt;/button&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/Teleport&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-11-2-\u642D\u914D\u7EC4\u4EF6\u4F7F\u7528" tabindex="-1">13.11.2 \u642D\u914D\u7EC4\u4EF6\u4F7F\u7528 <a class="header-anchor" href="#_13-11-2-\u642D\u914D\u7EC4\u4EF6\u4F7F\u7528" aria-hidden="true">#</a></h3><p><code>&lt;Teleport&gt;</code> \u53EA\u6539\u53D8\u4E86\u6E32\u67D3\u7684 DOM \u7ED3\u6784\uFF0C\u5B83\u4E0D\u4F1A\u5F71\u54CD\u7EC4\u4EF6\u95F4\u7684\u903B\u8F91\u5173\u7CFB\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5982\u679C <code>&lt;Teleport&gt;</code> \u5305\u542B\u4E86\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u90A3\u4E48\u8BE5\u7EC4\u4EF6\u59CB\u7EC8\u548C\u8FD9\u4E2A\u4F7F\u7528\u4E86 <code>&lt;teleport&gt;</code> \u7684\u7EC4\u4EF6\u4FDD\u6301\u903B\u8F91\u4E0A\u7684\u7236\u5B50\u5173\u7CFB\u3002\u4F20\u5165\u7684 props \u548C\u89E6\u53D1\u7684\u4E8B\u4EF6\u4E5F\u4F1A\u7167\u5E38\u5DE5\u4F5C\u3002</p><p>\u8FD9\u4E5F\u610F\u5473\u7740\u6765\u81EA\u7236\u7EC4\u4EF6\u7684\u6CE8\u5165\u4E5F\u4F1A\u6309\u9884\u671F\u5DE5\u4F5C\uFF0C\u5B50\u7EC4\u4EF6\u5C06\u5728 Vue Devtools \u4E2D\u5D4C\u5957\u5728\u7236\u7EA7\u7EC4\u4EF6\u4E0B\u9762\uFF0C\u800C\u4E0D\u662F\u653E\u5728\u5B9E\u9645\u5185\u5BB9\u79FB\u52A8\u5230\u7684\u5730\u65B9\u3002</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">teleport</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;#why&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;\u5475\u5475\u5475\u5475&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">teleport</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>\u7981\u7528&lt;Teleport&gt;</code></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;Teleport :disabled=&quot;isMobile&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  ...</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/Teleport&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-11-3-\u591A\u4E2Ateleport" tabindex="-1">13.11.3 \u591A\u4E2Ateleport <a class="header-anchor" href="#_13-11-3-\u591A\u4E2Ateleport" aria-hidden="true">#</a></h3><ul><li><p>\u5982\u679C\u6211\u4EEC\u5C06\u591A\u4E2Ateleport\u5E94\u7528\u5230\u540C\u4E00\u4E2A\u76EE\u6807\u4E0A\uFF08to\u7684\u503C\u76F8\u540C\uFF09\uFF0C\u90A3\u4E48\u8FD9\u4E9B\u76EE\u6807\u4F1A\u8FDB\u884C\u5408\u5E76\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;Teleport to=&quot;#modals&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;div&gt;A&lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/Teleport&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Teleport to=&quot;#modals&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;div&gt;B&lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/Teleport&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><p>\u5B9E\u73B0\u6548\u679C\u5982\u4E0B:</p><div class="language-html"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;modals&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;A&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;B&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="_13-12-\u63D2\u4EF6" tabindex="-1">13.12 \u63D2\u4EF6 <a class="header-anchor" href="#_13-12-\u63D2\u4EF6" aria-hidden="true">#</a></h2><h3 id="_13-12-1-\u4EC0\u4E48\u662F\u63D2\u4EF6" tabindex="-1">13. 12.1 \u4EC0\u4E48\u662F\u63D2\u4EF6 <a class="header-anchor" href="#_13-12-1-\u4EC0\u4E48\u662F\u63D2\u4EF6" aria-hidden="true">#</a></h3><ul><li><p>\u901A\u5E38\u6211\u4EEC\u5411Vue\u5168\u5C40\u6DFB\u52A0\u4E00\u4E9B\u529F\u80FD\u65F6\uFF0C\u4F1A\u91C7\u7528\u63D2\u4EF6\u7684\u6A21\u5F0F\uFF0C\u5B83\u6709\u4E24\u79CD\u7F16\u5199\u65B9\u5F0F\uFF1A</p><ul><li><p>\u5BF9\u8C61\u7C7B\u578B\uFF1A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F46\u662F\u5FC5\u987B\u5305\u542B\u4E00\u4E2A install \u7684\u51FD\u6570\uFF0C\u8BE5\u51FD\u6570\u4F1A\u5728\u5B89\u88C5\u63D2\u4EF6\u65F6\u6267\u884C\uFF1B</p></li><li><p>\u51FD\u6570\u7C7B\u578B\uFF1A\u4E00\u4E2Afunction\uFF0C\u8FD9\u4E2A\u51FD\u6570\u4F1A\u5728\u5B89\u88C5\u63D2\u4EF6\u65F6\u81EA\u52A8\u6267\u884C\uFF1B</p></li></ul></li></ul><p>\u63D2\u4EF6\u6CA1\u6709\u4E25\u683C\u5B9A\u4E49\u7684\u4F7F\u7528\u8303\u56F4\uFF0C\u4F46\u662F\u63D2\u4EF6\u53D1\u6325\u4F5C\u7528\u7684\u5E38\u89C1\u573A\u666F\u4E3B\u8981\u5305\u62EC\u4EE5\u4E0B\u51E0\u79CD\uFF1A</p><ol><li>\u901A\u8FC7 <a href="https://staging-cn.vuejs.org/api/application.html#app-component" target="_blank" rel="noopener noreferrer"><code>app.component()</code></a> \u548C <a href="https://staging-cn.vuejs.org/api/application.html#app-directive" target="_blank" rel="noopener noreferrer"><code>app.directive()</code></a> \u6CE8\u518C\u4E00\u5230\u591A\u4E2A\u5168\u5C40\u7EC4\u4EF6\u6216\u81EA\u5B9A\u4E49\u6307\u4EE4\u3002</li><li>\u901A\u8FC7 <a href="https://staging-cn.vuejs.org/api/application.html#app-provide" target="_blank" rel="noopener noreferrer"><code>app.provide()</code></a> \u4F7F\u4E00\u4E2A\u8D44\u6E90<a href="https://staging-cn.vuejs.org/guide/components/provide-inject.html" target="_blank" rel="noopener noreferrer">\u53EF\u88AB\u6CE8\u5165</a>\u8FDB\u6574\u4E2A\u5E94\u7528\u3002</li><li>\u5411 <a href="https://staging-cn.vuejs.org/api/application.html#app-config-globalproperties" target="_blank" rel="noopener noreferrer"><code>app.config.globalProperties</code></a> \u4E2D\u6DFB\u52A0\u4E00\u4E9B\u5168\u5C40\u5B9E\u4F8B\u5C5E\u6027\u6216\u65B9\u6CD5</li><li>\u6DFB\u52A0\u5168\u5C40\u8D44\u6E90\uFF1A\u6307\u4EE4/\u8FC7\u6EE4\u5668/\u8FC7\u6E21\u7B49\uFF1B</li><li>\u901A\u8FC7\u5168\u5C40 mixin \u6765\u6DFB\u52A0\u4E00\u4E9B\u7EC4\u4EF6\u9009\u9879\uFF1B</li><li>\u4E00\u4E2A\u53EF\u80FD\u4E0A\u8FF0\u4E09\u79CD\u90FD\u5305\u542B\u4E86\u7684\u529F\u80FD\u5E93 (\u4F8B\u5982 <a href="https://github.com/vuejs/vue-router-next" target="_blank" rel="noopener noreferrer">vue-router</a>)\u3002</li></ol><h3 id="_13-12-2-\u63D2\u4EF6\u7684\u7F16\u5199\u65B9\u5F0F" tabindex="-1">13.12.2 \u63D2\u4EF6\u7684\u7F16\u5199\u65B9\u5F0F <a class="header-anchor" href="#_13-12-2-\u63D2\u4EF6\u7684\u7F16\u5199\u65B9\u5F0F" aria-hidden="true">#</a></h3><p><code>\u5BF9\u8C61\u7C7B\u578B\u7684\u5199\u6CD5:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">install</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">globalProperties</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;coderwhy&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>\u51FD\u6570\u7C7B\u578B\u7684\u5199\u6CD5:</code></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>\u6848\u4F8B-\u5B9E\u73B0i18n\u56FD\u9645\u5316</code></p><p>\u8BA9\u6211\u4EEC\u4ECE\u8BBE\u7F6E\u63D2\u4EF6\u5BF9\u8C61\u5F00\u59CB\u3002\u5EFA\u8BAE\u5728\u4E00\u4E2A\u5355\u72EC\u7684\u6587\u4EF6\u4E2D\u521B\u5EFA\u5E76\u5BFC\u51FA\u5B83\uFF0C\u4EE5\u4FDD\u8BC1\u66F4\u597D\u5730\u7BA1\u7406\u903B\u8F91\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// plugins/i18n.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">install</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u5728\u8FD9\u91CC\u7F16\u5199\u63D2\u4EF6\u4EE3\u7801</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u60F3\u8BA9\u6574\u4E2A\u5E94\u7528\u7A0B\u5E8F\u6709\u4E00\u4E2A\u6309 key \u540D\u7FFB\u8BD1\u6587\u672C\u5185\u5BB9\u7684\u51FD\u6570\uFF0C\u56E0\u6B64\u6211\u4EEC\u5C06\u5B83\u66B4\u9732\u5728 <code>app.config.globalProperties</code> \u4E0A\u3002\u8FD9\u4E2A\u51FD\u6570\u63A5\u6536\u4E00\u4E2A\u4EE5 <code>.</code> \u4F5C\u4E3A\u5206\u9694\u7B26\u7684 <code>key</code> \u5B57\u7B26\u4E32\uFF0C\u7528\u6765\u5728\u7528\u6237\u63D0\u4F9B\u7684\u7FFB\u8BD1\u5B57\u5178\u4E2D\u67E5\u627E\u5BF9\u5E94\u8BED\u8A00\u7684\u6587\u672C\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// plugins/i18n.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">install</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// \u6CE8\u5165\u4E00\u4E2A\u5168\u5C40\u53EF\u7528\u7684 $translate() \u65B9\u6CD5</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">globalProperties</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$translate</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u83B7\u53D6 \`options\` \u5BF9\u8C61\u7684\u6DF1\u5C42\u5C5E\u6027</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// \u4F7F\u7528 \`key\` \u4F5C\u4E3A\u7D22\u5F15</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;.&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">o</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u63D2\u4EF6\u5E0C\u671B\u7528\u6237\u5728\u4F7F\u7528\u8BE5\u63D2\u4EF6\u65F6\u901A\u8FC7\u9009\u9879\u4F20\u5165\u4E00\u4E2A\u7FFB\u8BD1\u5B57\u5178\u5BF9\u8C61\uFF0C\u6240\u4EE5\u5E94\u8BE5\u8FD9\u6837\u4F7F\u7528\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">i18nPlugin</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./plugins/i18n&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i18nPlugin</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">greetings</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Bonjour!&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u7684 <code>$translate</code> \u51FD\u6570\u4F1A\u63A5\u6536\u4E00\u4E2A\u4F8B\u5982 <code>greetings.hello</code> \u7684\u5B57\u7B26\u4E32\uFF0C\u5728\u7528\u6237\u63D0\u4F9B\u7684\u7FFB\u8BD1\u5B57\u5178\u4E2D\u67E5\u627E\uFF0C\u5E76\u8FD4\u56DE\u7FFB\u8BD1\u5F97\u5230\u7684\u503C\uFF0C\u5728\u8FD9\u91CC\u5C31\u662F <code>Bonjour!</code>\uFF1A</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;h1&gt;{{ $translate(&#39;greetings.hello&#39;) }}&lt;/h1&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_13-12-3-\u63D2\u4EF6\u4E2D\u7684\u4F9B\u7ED9-\u6CE8\u5165" tabindex="-1">13.12.3 \u63D2\u4EF6\u4E2D\u7684\u4F9B\u7ED9 / \u6CE8\u5165 <a class="header-anchor" href="#_13-12-3-\u63D2\u4EF6\u4E2D\u7684\u4F9B\u7ED9-\u6CE8\u5165" aria-hidden="true">#</a></h3><p>\u5728\u63D2\u4EF6\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 <code>provide</code> \u6765\u4E3A\u63D2\u4EF6\u7528\u6237\u4F9B\u7ED9\u4E00\u4E9B\u5185\u5BB9\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06 <code>options</code> \u53C2\u6570\u63D0\u4F9B\u7ED9\u6574\u4E2A\u5E94\u7528\uFF0C\u4EE5\u4FBF\u5404\u4E2A\u7EC4\u4EF6\u90FD\u80FD\u4F7F\u7528\u8FD9\u4E2A\u7FFB\u8BD1\u5B57\u5178\u5BF9\u8C61\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;">// plugins/i18n.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">install</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">globalProperties</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$translate</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;.&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">o</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;i18n&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\uFF0C\u63D2\u4EF6\u7528\u6237\u5C31\u53EF\u4EE5\u5728\u4ED6\u4EEC\u7684\u7EC4\u4EF6\u4E2D\u4EE5 <code>i18n</code> \u4E3A key \u6CE8\u5165\u5E76\u8BBF\u95EE\u63D2\u4EF6\u7684\u9009\u9879\u5BF9\u8C61\u4E86\u3002</p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">inject</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">i18n</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;i18n&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">i18n</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">greetings</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="_13-3-nexttick" tabindex="-1">13.3 nextTick <a class="header-anchor" href="#_13-3-nexttick" aria-hidden="true">#</a></h2><p>\u7B49\u5F85\u4E0B\u4E00\u6B21 DOM \u66F4\u65B0\u5237\u65B0\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p><ul><li><p>\u6BD4\u5982\u6211\u4EEC\u6709\u4E0B\u9762\u7684\u9700\u6C42\uFF1A</p><ul><li>\u70B9\u51FB\u4E00\u4E2A\u6309\u94AE\uFF0C\u6211\u4EEC\u4F1A\u4FEE\u6539\u5728h2\u4E2D\u663E\u793A\u7684message\uFF1B</li><li>message\u88AB\u4FEE\u6539\u540E\uFF0C\u83B7\u53D6h2\u7684\u9AD8\u5EA6\uFF1B</li></ul></li><li><p>\u5B9E\u73B0\u4E0A\u9762\u7684\u6848\u4F8B\u6211\u4EEC\u6709\u4E09\u79CD\u65B9\u5F0F\uFF1A</p><ul><li>\u65B9\u5F0F\u4E00\uFF1A\u5728\u70B9\u51FB\u6309\u94AE\u540E\u7ACB\u5373\u83B7\u53D6\u5230h2\u7684\u9AD8\u5EA6\uFF08\u9519\u8BEF\u7684\u505A\u6CD5\uFF09</li><li>\u65B9\u5F0F\u4E8C\uFF1A\u5728updated\u751F\u547D\u5468\u671F\u51FD\u6570\u4E2D\u83B7\u53D6h2\u7684\u9AD8\u5EA6\uFF08\u4F46\u662F\u5176\u4ED6\u6570\u636E\u66F4\u65B0\uFF0C\u4E5F\u4F1A\u6267\u884C\u8BE5\u64CD\u4F5C\uFF09 p\u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528nexttick\u51FD\u6570\uFF1B</li></ul></li><li><p><strong>\u7C7B\u578B</strong></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#abb2bf;">function nextTick(callback?: () =&gt; void): Promise&lt;void&gt;</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre></div></li><li><p><strong>\u8BE6\u7EC6\u4FE1\u606F</strong></p><p>\u5F53\u4F60\u5728 Vue \u4E2D\u66F4\u6539\u54CD\u5E94\u5F0F\u72B6\u6001\u65F6\uFF0C\u6700\u7EC8\u7684 DOM \u66F4\u65B0\u5E76\u4E0D\u662F\u540C\u6B65\u751F\u6548\u7684\uFF0C\u800C\u662F\u7531 Vue \u5C06\u5B83\u4EEC\u7F13\u5B58\u5230\u201Cnext tick\u201D\u4EE5\u786E\u4FDD\u6BCF\u4E2A\u7EC4\u4EF6\u65E0\u8BBA\u53D1\u751F\u591A\u5C11\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u4EC5\u6267\u884C\u4E00\u6B21\u66F4\u65B0\u3002</p><p><code>nextTick()</code> \u53EF\u4EE5\u5728\u72B6\u6001\u6539\u53D8\u540E\u7ACB\u5373\u4F7F\u7528\uFF0C\u4EE5\u7B49\u5F85 DOM \u66F4\u65B0\u5B8C\u6210\u3002\u4F60\u53EF\u4EE5\u4F20\u9012\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\uFF0C\u6216\u8005 await \u8FD4\u56DE\u7684 Promise\u3002</p></li><li><p><strong>\u793A\u4F8B</strong></p><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">nextTick</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increment</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// DOM \u8FD8\u672A\u66F4\u65B0</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;counter&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">nextTick</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// DOM \u6B64\u65F6\u5DF2\u7ECF\u66F4\u65B0</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;counter&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;"> @</span><span style="color:#D19A66;">click</span><span style="color:#ABB2BF;">=</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#E06C75;">increment</span><span style="color:#ABB2BF;">&quot;</span><span style="color:#ABB2BF;">&gt;{{ </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> }}&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre></div></li></ul>`,202),B=[e];function t(c,r,y,i,F,A){return a(),n("div",null,B)}var E=s(o,[["render",t]]);export{d as __pageData,E as default};
